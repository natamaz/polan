!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){"use strict";a.fn.fileinputLocales={},a.fn.fileinputThemes={},String.prototype.setTokens=function(a){var b,c,d=this.toString();for(b in a)a.hasOwnProperty(b)&&(c=new RegExp("{"+b+"}","g"),d=d.replace(c,a[b]));return d};var b,c;b={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",INIT_FLAG:"init-",OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],logMessages:{ajaxError:"{status}: {error}. Error Details: {text}.",badDroppedFiles:"Error scanning dropped files!",badExifParser:"Error loading the piexif.js library. {details}",badInputType:'The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.',exifWarning:'To avoid this warning, either set "autoOrientImage" to "false" OR ensure you have loaded the "piexif.js" library correctly on your page before the "fileinput.js" script.',invalidChunkSize:'Invalid upload chunk size: "{chunkSize}". Resumable uploads are disabled.',invalidThumb:'Invalid thumb frame with id: "{id}".',noResumableSupport:"The browser does not support resumable or chunk uploads.",noUploadUrl:'The "uploadUrl" is not set. Ajax uploads and resumable uploads have been disabled.',retryStatus:"Retrying upload for chunk # {chunk} for {filename}... retry # {retry}."},objUrl:window.URL||window.webkitURL,now:function(){return new Date},round:function(a){return a=parseFloat(a),isNaN(a)?0:Math.floor(Math.round(a))},getFileRelativePath:function(a){return String(a.relativePath||a.webkitRelativePath||b.getFileName(a)||null)},getFileId:function(a,c){var d=b.getFileRelativePath(a);return"function"==typeof c?c(a):a&&d?a.size+"_"+d.replace(/\s/gim,"_"):null},getFrameSelector:function(a,b){return b=b||"",'[id="'+a+'"]'+b},getZoomSelector:function(a,b){return b=b||"",'[id="zoom-'+a+'"]'+b},getFrameElement:function(a,c,d){return a.find(b.getFrameSelector(c,d))},getZoomElement:function(a,c,d){return a.find(b.getZoomSelector(c,d))},getElapsed:function(b){var c=b,d="",e={},f={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};return Object.keys(f).forEach(function(a){e[a]=Math.floor(c/f[a]),c-=e[a]*f[a]}),a.each(e,function(a,b){b>0&&(d+=(d?" ":"")+b+a.substring(0,1))}),d},debounce:function(a,b){var c;return function(){var d=arguments,e=this;clearTimeout(c),c=setTimeout(function(){a.apply(e,d)},b)}},stopEvent:function(a){a.stopPropagation(),a.preventDefault()},getFileName:function(a){return a?a.fileName||a.name||"":""},createObjectURL:function(a){return b.objUrl&&b.objUrl.createObjectURL&&a?b.objUrl.createObjectURL(a):""},revokeObjectURL:function(a){b.objUrl&&b.objUrl.revokeObjectURL&&a&&b.objUrl.revokeObjectURL(a)},compare:function(a,b,c){return void 0!==a&&(c?a===b:a.match(b))},isIE:function(a){var b,c;return"Microsoft Internet Explorer"!==navigator.appName?!1:10===a?new RegExp("msie\\s"+a,"i").test(navigator.userAgent):(b=document.createElement("div"),b.innerHTML="<!--[if IE "+a+"]> <i></i> <![endif]-->",c=b.getElementsByTagName("i").length,document.body.appendChild(b),b.parentNode.removeChild(b),c)},canAssignFilesToInput:function(){var a=document.createElement("input");try{return a.type="file",a.files=null,!0}catch(b){return!1}},getDragDropFolders:function(a){var b,c,d=a?a.length:0,e=0;if(d>0&&a[0].webkitGetAsEntry())for(b=0;d>b;b++)c=a[b].webkitGetAsEntry(),c&&c.isDirectory&&e++;return e},initModal:function(b){var c=a("body");c.length&&b.appendTo(c)},isEmpty:function(b,c){return void 0===b||null===b||0===b.length||c&&""===a.trim(b)},isArray:function(a){return Array.isArray(a)||"[object Array]"===Object.prototype.toString.call(a)},ifSet:function(a,b,c){return c=c||"",b&&"object"==typeof b&&a in b?b[a]:c},cleanArray:function(a){return a instanceof Array||(a=[]),a.filter(function(a){return void 0!==a&&null!==a})},spliceArray:function(b,c,d){var e,f,g=0,h=[];if(!(b instanceof Array))return[];for(f=a.extend(!0,[],b),d&&f.reverse(),e=0;e<f.length;e++)e!==c&&(h[g]=f[e],g++);return d&&h.reverse(),h},getNum:function(a,b){return b=b||0,"number"==typeof a?a:("string"==typeof a&&(a=parseFloat(a)),isNaN(a)?b:a)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var a=document.createElement("div");return!b.isIE(9)&&(void 0!==a.draggable||void 0!==a.ondragstart&&void 0!==a.ondrop)},hasFileUploadSupport:function(){return b.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(a){return!1}},hasArrayBufferViewSupport:function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(a){return!1}},hasResumableUploadSupport:function(){return b.hasFileUploadSupport()&&b.hasBlobSupport()&&b.hasArrayBufferViewSupport()&&(!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!!Blob.prototype.slice||!1)},dataURI2Blob:function(a){var c,d,e,f,g,h,i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,j=b.hasBlobSupport(),k=(j||i)&&window.atob&&window.ArrayBuffer&&window.Uint8Array;if(!k)return null;for(c=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]),d=new ArrayBuffer(c.length),e=new Uint8Array(d),f=0;f<c.length;f+=1)e[f]=c.charCodeAt(f);return g=a.split(",")[0].split(":")[1].split(";")[0],j?new Blob([b.hasArrayBufferViewSupport()?e:d],{type:g}):(h=new i,h.append(d),h.getBlob(g))},arrayBuffer2String:function(a){if(window.TextDecoder)return new TextDecoder("utf-8").decode(a);var b,c,d,e,f=Array.prototype.slice.apply(new Uint8Array(a)),g="",h=0;for(b=f.length;b>h;)switch(c=f[h++],c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:g+=String.fromCharCode(c);break;case 12:case 13:d=f[h++],g+=String.fromCharCode((31&c)<<6|63&d);break;case 14:d=f[h++],e=f[h++],g+=String.fromCharCode((15&c)<<12|(63&d)<<6|(63&e)<<0)}return g},isHtml:function(a){var b=document.createElement("div");b.innerHTML=a;for(var c=b.childNodes,d=c.length;d--;)if(1===c[d].nodeType)return!0;return!1},isSvg:function(a){return a.match(/^\s*<\?xml/i)&&(a.match(/<!DOCTYPE svg/i)||a.match(/<svg/i))},getMimeType:function(a,b,c){switch(a){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504E47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(a.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(a.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return b&&!b.match(/[^\u0000-\u007f]/)?"application/text-plain":c}}}},addCss:function(a,b){a.removeClass(b).addClass(b)},getElement:function(c,d,e){return b.isEmpty(c)||b.isEmpty(c[d])?e:a(c[d])},uniqId:function(){return Math.round((new Date).getTime())+"_"+Math.round(100*Math.random())},htmlEncode:function(a,b){return void 0===a?b||null:a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(b,c){var d=b;return c?(a.each(c,function(a,b){"function"==typeof b&&(b=b()),d=d.split(a).join(b)}),d):d},cleanMemory:function(a){var c=a.is("img")?a.attr("src"):a.find("source").attr("src");b.revokeObjectURL(c)},findFileName:function(a){var b=a.lastIndexOf("/");return-1===b&&(b=a.lastIndexOf("\\")),a.split(a.substring(b,b+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(a){var c=document,d=c.documentElement;d&&a&&!b.checkFullScreen()?d.requestFullscreen?d.requestFullscreen():d.msRequestFullscreen?d.msRequestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullscreen&&d.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):c.exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.mozCancelFullScreen?c.mozCancelFullScreen():c.webkitExitFullscreen&&c.webkitExitFullscreen()},moveArray:function(b,c,d,e){var f=a.extend(!0,[],b);if(e&&f.reverse(),d>=f.length)for(var g=d-f.length;g--+1;)f.push(void 0);return f.splice(d,0,f.splice(c,1)[0]),e&&f.reverse(),f},cleanZoomCache:function(a){var b=a.closest(".kv-zoom-cache-theme");b.length||(b=a.closest(".kv-zoom-cache")),b.remove()},closeButton:function(a){return a=a?"close "+a:"close",'<button type="button" class="'+a+'" aria-label="Close">\n  <span aria-hidden="true">&times;</span>\n</button>'},getRotation:function(a){switch(a){case 2:return"rotateY(180deg)";case 3:return"rotate(180deg)";case 4:return"rotate(180deg) rotateY(180deg)";case 5:return"rotate(270deg) rotateY(180deg)";case 6:return"rotate(90deg)";case 7:return"rotate(90deg) rotateY(180deg)";case 8:return"rotate(270deg)";default:return""}},setTransform:function(a,b){a&&(a.style.transform=b,a.style.webkitTransform=b,a.style["-moz-transform"]=b,a.style["-ms-transform"]=b,a.style["-o-transform"]=b)}},c=function(c,d){var e=this;e.$element=a(c),e.$parent=e.$element.parent(),e._validate()&&(e.isPreviewable=b.hasFileAPISupport(),e.isIE9=b.isIE(9),e.isIE10=b.isIE(10),(e.isPreviewable||e.isIE9)&&(e._init(d),e._listen()),e.$element.removeClass("file-loading"))},c.prototype={constructor:c,_cleanup:function(){var a=this;a.reader=null,a.clearFileStack(),a.fileBatchCompleted=!0,a.isError=!1,a.cancelling=!1,a.paused=!1,a.lastProgress=0,a._initAjax()},_initAjax:function(){var a=this;a.ajaxQueue=[],a.ajaxRequests=[],a.ajaxQueueIntervalId=null,a.ajaxCurrentThreads=0,a.ajaxAborted=!1},_init:function(c,d){var e,f,g,h,i=this,j=i.$element;i.options=c,a.each(c,function(a,c){switch(a){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":i[a]=b.getNum(c);break;default:i[a]=c}}),i.rtl&&(h=i.previewZoomButtonIcons.prev,i.previewZoomButtonIcons.prev=i.previewZoomButtonIcons.next,i.previewZoomButtonIcons.next=h),!isNaN(i.maxAjaxThreads)&&i.maxAjaxThreads<i.resumableUploadOptions.maxThreads&&(i.resumableUploadOptions.maxThreads=i.maxAjaxThreads),i._initFileManager(),"function"==typeof i.autoOrientImage&&(i.autoOrientImage=i.autoOrientImage()),"function"==typeof i.autoOrientImageInitial&&(i.autoOrientImageInitial=i.autoOrientImageInitial()),d||i._cleanup(),i.$form=j.closest("form"),i._initTemplateDefaults(),i.uploadFileAttr=b.isEmpty(j.attr("name"))?"file_data":j.attr("name"),g=i._getLayoutTemplate("progress"),i.progressTemplate=g.replace("{class}",i.progressClass),i.progressInfoTemplate=g.replace("{class}",i.progressInfoClass),i.progressPauseTemplate=g.replace("{class}",i.progressPauseClass),i.progressCompleteTemplate=g.replace("{class}",i.progressCompleteClass),i.progressErrorTemplate=g.replace("{class}",i.progressErrorClass),i.isDisabled=j.attr("disabled")||j.attr("readonly"),i.isDisabled&&j.attr("disabled",!0),i.isClickable=i.browseOnZoneClick&&i.showPreview&&(i.dropZoneEnabled||!b.isEmpty(i.defaultPreviewContent)),i.isAjaxUpload=b.hasFileUploadSupport()&&!b.isEmpty(i.uploadUrl),i.dropZoneEnabled=b.hasDragDropSupport()&&i.dropZoneEnabled,i.isAjaxUpload||(i.dropZoneEnabled=i.dropZoneEnabled&&b.canAssignFilesToInput()),i.slug="function"==typeof c.slugCallback?c.slugCallback:i._slugDefault,i.mainTemplate=i.showCaption?i._getLayoutTemplate("main1"):i._getLayoutTemplate("main2"),i.captionTemplate=i._getLayoutTemplate("caption"),i.previewGenericTemplate=i._getPreviewTemplate("generic"),!i.imageCanvas&&i.resizeImage&&(i.maxImageWidth||i.maxImageHeight)&&(i.imageCanvas=document.createElement("canvas"),i.imageCanvasContext=i.imageCanvas.getContext("2d")),b.isEmpty(j.attr("id"))&&j.attr("id",b.uniqId()),i.namespace=".fileinput_"+j.attr("id").replace(/-/g,"_"),void 0===i.$container?i.$container=i._createContainer():i._refreshContainer(),f=i.$container,i.$dropZone=f.find(".file-drop-zone"),i.$progress=f.find(".kv-upload-progress"),i.$btnUpload=f.find(".fileinput-upload"),i.$captionContainer=b.getElement(c,"elCaptionContainer",f.find(".file-caption")),i.$caption=b.getElement(c,"elCaptionText",f.find(".file-caption-name")),b.isEmpty(i.msgPlaceholder)||(e=j.attr("multiple")?i.filePlural:i.fileSingle,i.$caption.attr("placeholder",i.msgPlaceholder.replace("{files}",e))),i.$captionIcon=i.$captionContainer.find(".file-caption-icon"),i.$previewContainer=b.getElement(c,"elPreviewContainer",f.find(".file-preview")),i.$preview=b.getElement(c,"elPreviewImage",f.find(".file-preview-thumbnails")),i.$previewStatus=b.getElement(c,"elPreviewStatus",f.find(".file-preview-status")),i.$errorContainer=b.getElement(c,"elErrorContainer",i.$previewContainer.find(".kv-fileinput-error")),i._validateDisabled(),b.isEmpty(i.msgErrorClass)||b.addCss(i.$errorContainer,i.msgErrorClass),d?i._errorsExist()||i.$errorContainer.hide():(i.$errorContainer.hide(),i.previewInitId="thumb-"+j.attr("id"),i._initPreviewCache(),i._initPreview(!0),i._initPreviewActions(),i.$parent.hasClass("file-loading")&&(i.$container.insertBefore(i.$parent),i.$parent.remove())),i._setFileDropZoneTitle(),j.attr("disabled")&&i.disable(),i._initZoom(),i.hideThumbnailContent&&b.addCss(i.$preview,"hide-content")},_initFileManager:function(){var c=this;c.fileManager={stack:{},processed:[],errors:[],loadedImages:{},totalImages:0,totalFiles:null,totalSize:null,uploadedSize:0,stats:{},initStats:function(a){var d={started:b.now().getTime()};a?c.fileManager.stats[a]=d:c.fileManager.stats=d},getUploadStats:function(a,d,e){var f=c.fileManager,g=a?f.stats[a]&&f.stats[a].started||null:null;g||(g=b.now().getTime());var h=(b.now().getTime()-g)/1e3,i=["B/s","KB/s","MB/s","GB/s","TB/s","PB/s","EB/s","ZB/s","YB/s"],j=h?d/h:0,k=c._getSize(j,i),l=e-d,m={fileId:a,started:g,elapsed:h,loaded:d,total:e,bps:j,bitrate:k,pendingBytes:l};return a?f.stats[a]=m:f.stats=m,m},exists:function(b){return-1!==a.inArray(b,c.fileManager.getIdList())},count:function(){return c.fileManager.getIdList().length},total:function(){var a=c.fileManager;return a.totalFiles||(a.totalFiles=a.count()),a.totalFiles},getTotalSize:function(){var b=c.fileManager;return b.totalSize?b.totalSize:(b.totalSize=0,a.each(c.fileManager.stack,function(a,c){var d=parseFloat(c.size);b.totalSize+=isNaN(d)?0:d}),b.totalSize)},add:function(a,d){d||(d=c.fileManager.getId(a)),d&&(c.fileManager.stack[d]={file:a,name:b.getFileName(a),relativePath:b.getFileRelativePath(a),size:a.size,nameFmt:c._getFileName(a,""),sizeFmt:c._getSize(a.size)})},remove:function(a){var b=a.attr("data-fileid");b&&c.fileManager.removeFile(b)},removeFile:function(a){delete c.fileManager.stack[a],delete c.fileManager.loadedImages[a]},move:function(b,d){var e={},f=c.fileManager.stack;(b||d)&&b!==d&&(a.each(f,function(a,c){a!==b&&(e[a]=c),a===d&&(e[b]=f[b])}),c.fileManager.stack=e)},list:function(){var b=[];return a.each(c.fileManager.stack,function(a,c){c&&c.file&&b.push(c.file)}),b},isPending:function(b){return-1===a.inArray(b,c.fileManager.processed)&&c.fileManager.exists(b)},isProcessed:function(){var b=!0,d=c.fileManager;return a.each(d.stack,function(a){d.isPending(a)&&(b=!1)}),b},clear:function(){var a=c.fileManager;a.totalFiles=null,a.totalSize=null,a.uploadedSize=0,a.stack={},a.errors=[],a.processed=[],a.stats={},a.clearImages()},clearImages:function(){c.fileManager.loadedImages={},c.fileManager.totalImages=0},addImage:function(a,b){c.fileManager.loadedImages[a]=b},removeImage:function(a){delete c.fileManager.loadedImages[a]},getImageIdList:function(){return Object.keys(c.fileManager.loadedImages)},getImageCount:function(){return c.fileManager.getImageIdList().length},getId:function(a){return c._getFileId(a)},getIndex:function(a){return c.fileManager.getIdList().indexOf(a)},getThumb:function(b){var d=null;return c._getThumbs().each(function(){var c=a(this);c.attr("data-fileid")===b&&(d=c)}),d},getThumbIndex:function(a){var b=a.attr("data-fileid");return c.fileManager.getIndex(b)},getIdList:function(){return Object.keys(c.fileManager.stack)},getFile:function(a){return c.fileManager.stack[a]||null},getFileName:function(a,b){var d=c.fileManager.getFile(a);return d?b?d.nameFmt||"":d.name||"":""},getFirstFile:function(){var a=c.fileManager.getIdList(),b=a&&a.length?a[0]:null;return c.fileManager.getFile(b)},setFile:function(a,b){c.fileManager.getFile(a)?c.fileManager.stack[a].file=b:c.fileManager.add(b,a)},setProcessed:function(a){c.fileManager.processed.push(a)},getProgress:function(){var a=c.fileManager.total(),b=c.fileManager.processed.length;return a?Math.ceil(b/a*100):0},setProgress:function(a,b){var d=c.fileManager.getFile(a);!isNaN(b)&&d&&(d.progress=b)}}},_setUploadData:function(c,d){var e=this;a.each(d,function(a,d){var f=e.uploadParamNames[a]||a;b.isArray(d)?c.append(f,d[0],d[1]):c.append(f,d)})},_initResumableUpload:function(){var c=this,d=c.resumableUploadOptions,e=b.logMessages;if(c.enableResumableUpload){if(d.fallback!==!1&&"function"!=typeof d.fallback&&(d.fallback=function(a){a._log(e.noResumableSupport),a.enableResumableUpload=!1}),!b.hasResumableUploadSupport()&&d.fallback!==!1)return void d.fallback(c);if(!c.uploadUrl&&c.enableResumableUpload)return c._log(e.noUploadUrl),void(c.enableResumableUpload=!1);if(d.chunkSize=parseFloat(d.chunkSize),d.chunkSize<=0||isNaN(d.chunkSize))return c._log(e.invalidChunkSize,{chunkSize:d.chunkSize}),void(c.enableResumableUpload=!1);c.resumableManager={init:function(a,b,d){var e=c.resumableManager,f=c.fileManager;e.currThreads=0,e.logs=[],e.stack=[],e.error="",e.chunkIntervalId=null,e.id=a,e.file=b.file,e.fileName=b.name,e.fileIndex=d,e.completed=!1,e.testing=!1,e.lastProgress=0,c.showPreview&&(e.$thumb=f.getThumb(a)||null,e.$progress=e.$btnDelete=null,e.$thumb&&e.$thumb.length&&(e.$progress=e.$thumb.find(".file-thumb-progress"),e.$btnDelete=e.$thumb.find(".kv-file-remove"))),e.chunkSize=1024*c.resumableUploadOptions.chunkSize,e.chunkCount=e.getTotalChunks()},logAjaxError:function(a,b,d){c.resumableUploadOptions.showErrorLog&&c._log(e.ajaxError,{status:a.status,error:d,text:a.responseText||""})},reset:function(){var a=c.resumableManager;a.processed={}},setProcessed:function(a){var b,d=c.resumableManager,e=c.fileManager,f=d.id,g=d.$thumb,h=d.$progress,i=g&&g.length,j={id:i?g.attr("id"):"",index:e.getIndex(f),fileId:f};d.completed=!0,d.lastProgress=0,e.uploadedSize+=d.file.size,i&&g.removeClass("file-uploading"),"success"===a?(c.showPreview&&(c._setProgress(101,h),c._setThumbStatus(g,"Success"),c._initUploadSuccess(d.processed[f].data,g)),c.fileManager.removeFile(f),delete d.processed[f],c._raise("fileuploaded",[j.id,j.index,j.fileId]),e.isProcessed()&&c._setProgress(101)):(c.showPreview&&(c._setThumbStatus(g,"Error"),c._setPreviewError(g,!0),c._setProgress(101,h,c.msgProgressError),c._setProgress(101,c.$progress,c.msgProgressError),c.cancelling=!0),c.$errorContainer.find('li[data-file-id="'+j.fileId+'"]').length||(b=c.msgResumableUploadRetriesExceeded.setTokens({file:d.fileName,max:c.resumableUploadOptions.maxRetries,error:d.error}),c._showFileError(b,j))),e.isProcessed()&&d.reset()},check:function(){var b=c.resumableManager,d=!0;a.each(b.logs,function(a,b){return b?void 0:(d=!1,!1)}),d&&(clearInterval(b.chunkIntervalId),b.setProcessed("success"))},processedResumables:function(){var a,b=c.resumableManager.logs,d=0;if(!b||!b.length)return 0;for(a=0;a<b.length;a++)b[a]===!0&&d++;return d},getUploadedSize:function(){var a=c.resumableManager,b=a.processedResumables()*a.chunkSize;return b>a.file.size?a.file.size:b},getTotalChunks:function(){var a=c.resumableManager,b=parseFloat(a.chunkSize);return!isNaN(b)&&b>0?Math.ceil(a.file.size/b):0},getProgress:function(){var a=c.resumableManager,b=a.processedResumables(),d=a.chunkCount;return 0===d?0:Math.ceil(b/d*100)},checkAborted:function(a){(c.paused||c.cancelling)&&(clearInterval(a),c.unlock())},upload:function(){var a,d=c.resumableManager,e=c.fileManager,f=e.getIdList(),g="new";a=setInterval(function(){var h;if(d.checkAborted(a),"new"===g&&(c.lock(),g="processing",h=f.shift(),e.initStats(h),e.stack[h]&&(d.init(h,e.stack[h],e.getIndex(h)),d.testUpload(),d.uploadResumable())),!e.isPending(h)&&d.completed&&(g="new"),e.isProcessed()){var i=c.$preview.find(".file-preview-initial");i.length&&(b.addCss(i,b.SORT_CSS),c._initSortable()),clearInterval(a),c._clearFileInput(),c.unlock(),setTimeout(function(){var a=c.previewCache.data;a&&(c.initialPreview=a.content,c.initialPreviewConfig=a.config,c.initialPreviewThumbTags=a.tags),c._raise("filebatchuploadcomplete",[c.initialPreview,c.initialPreviewConfig,c.initialPreviewThumbTags,c._getExtraData()])},c.processDelay)}},c.processDelay)},uploadResumable:function(){var a,b=c.resumableManager,d=b.chunkCount;for(a=0;d>a;a++)b.logs[a]=!(!b.processed[b.id]||!b.processed[b.id][a]);for(a=0;d>a;a++)b.pushAjax(a,0);b.chunkIntervalId=setInterval(b.loopAjax,c.queueDelay)},testUpload:function(){var d,e,f,g,h,i,j,k=c.resumableManager,l=c.resumableUploadOptions,m=c.fileManager,n=k.id;return l.testUrl?(k.testing=!0,d=new FormData,e=m.stack[n],c._setUploadData(d,{fileId:n,fileName:e.fileName,fileSize:e.size,fileRelativePath:e.relativePath,chunkSize:k.chunkSize,chunkCount:k.chunkCount}),f=function(a){j=c._getOutData(d,a),c._raise("filetestbeforesend",[n,m,k,j])},g=function(e,f,g){j=c._getOutData(d,g,e);var h=c.uploadParamNames,i=h.chunksUploaded||"chunksUploaded",l=[n,m,k,j];e[i]&&b.isArray(e[i])?(k.processed[n]||(k.processed[n]={}),a.each(e[i],function(a,b){k.logs[b]=!0,k.processed[n][b]=!0}),k.processed[n].data=e,c._raise("filetestsuccess",l)):c._raise("filetesterror",l),k.testing=!1},h=function(a,b,e){j=c._getOutData(d,a),c._raise("filetestajaxerror",[n,m,k,j]),k.logAjaxError(a,b,e),k.testing=!1},i=function(){c._raise("filetestcomplete",[n,m,k,c._getOutData(d)]),k.testing=!1},void c._ajaxSubmit(f,g,i,h,d,n,k.fileIndex,l.testUrl)):void(k.testing=!1)},pushAjax:function(a,b){c.resumableManager.stack.push([a,b])},sendAjax:function(a,d){var f,g=c.fileManager,h=c.resumableManager,i=c.resumableUploadOptions,j=h.chunkSize,k=h.id,l=h.file,m=h.$thumb,n=h.$btnDelete;if(!h.processed[k]||!h.processed[k][a]){if(h.currThreads++,d>i.maxRetries)return void h.setProcessed("error");var o,p,q,r,s,t,u=l.slice?"slice":l.mozSlice?"mozSlice":l.webkitSlice?"webkitSlice":"slice",v=l[u](j*a,j*(a+1));o=new FormData,f=g.stack[k],c._setUploadData(o,{chunkCount:h.chunkCount,chunkIndex:a,chunkSize:j,chunkSizeStart:j*a,fileBlob:[v,h.fileName],fileId:k,fileName:h.fileName,fileRelativePath:f.relativePath,fileSize:l.size,retryCount:d}),h.$progress&&h.$progress.length&&h.$progress.show(),q=function(e){p=c._getOutData(o,e),c.showPreview&&(m.hasClass("file-preview-success")||(c._setThumbStatus(m,"Loading"),b.addCss(m,"file-uploading")),n.attr("disabled",!0)),c._raise("filechunkbeforesend",[k,a,d,g,h,p])},r=function(b,f,i){p=c._getOutData(o,i,b);var j=c.uploadParamNames,l=j.chunkIndex||"chunkIndex",m=c.resumableUploadOptions,n=[k,a,d,g,h,p];h.currThreads--,b.error?(m.showErrorLog&&c._log(e.retryStatus,{retry:d+1,filename:h.fileName,chunk:a}),h.pushAjax(a,d+1),h.error=b.error,c._raise("filechunkerror",n)):(h.logs[b[l]]=!0,h.processed[k]||(h.processed[k]={}),h.processed[k][b[l]]=!0,h.processed[k].data=b,c._raise("filechunksuccess",n),h.check())},s=function(b,e,f){p=c._getOutData(o,b),h.currThreads--,h.error=f,h.logAjaxError(b,e,f),c._raise("filechunkajaxerror",[k,a,d,g,h,p]),h.pushAjax(a,d+1)},t=function(){c._raise("filechunkcomplete",[k,a,d,g,h,c._getOutData(o)])},c._ajaxSubmit(q,r,t,s,o,k,h.fileIndex)}},loopAjax:function(){var a=c.resumableManager;if(a.currThreads<c.resumableUploadOptions.maxThreads&&!a.testing){var b,d=a.stack.shift();"undefined"!=typeof d&&(b=d[0],a.processed[a.id]&&a.processed[a.id][b]?a.processedResumables()>=a.getTotalChunks()&&(a.setProcessed("success"),clearInterval(a.chunkIntervalId)):a.sendAjax(b,d[1]))}}},c.resumableManager.reset()}},_initTemplateDefaults:function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R=this;c='{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {pause}\n      {upload}\n      {browse}\n    </div>\n</div>',d='{preview}\n<div class="kv-upload-progress kv-hidden"></div>\n<div class="clearfix"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',e='<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',g=b.closeButton("fileinput-remove"),f='<i class="glyphicon glyphicon-file"></i>',h='<div class="file-caption form-control {class}" tabindex="500">\n  <span class="file-caption-icon"></span>\n  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n</div>',i='<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',j='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',k='<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',l='<div id="'+b.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+b.MODAL_ID+'Label"></div>',m='<div class="modal-dialog modal-lg{rtl}" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h5 class="modal-title">{heading}</h5>\n      <span class="kv-zoom-title"></span>\n      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}</div>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',n='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>{stats}',Q='<div class="text-info file-upload-stats"><span class="pending-time">{pendingTime}</span> <span class="upload-speed">{uploadSpeed}</span></div>',o=" <samp>({sizeText})</samp>",p='<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">\n        <div class="file-caption-info">{caption}</div>\n        <div class="file-size-info">{size}</div>\n    </div>\n    {progress}\n{indicator}\n{actions}\n</div>',q='<div class="file-actions">\n    <div class="file-footer-buttons">\n        {download} {upload} {delete} {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',r='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',s='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',t='<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>',u='<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',v='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',w='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>',x='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-fileid="{fileid}" data-template="{template}"',y=x+'><div class="kv-file-content">\n',z=x+' title="{caption}"><div class="kv-file-content">\n',A="</div>{footer}\n</div>\n",B="{content}\n",N=" {style}",C='<div class="kv-preview-data file-preview-html" title="{caption}"'+N+">{data}</div>\n",D='<img src="{data}" class="file-preview-image kv-preview-data" title="{title}" alt="{alt}"'+N+">\n",E='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly'+N+">{data}</textarea>\n",F='<iframe class="kv-preview-data file-preview-office" src="https://view.officeapps.live.com/op/embed.aspx?src={data}"'+N+"></iframe>",G='<iframe class="kv-preview-data file-preview-gdocs" src="https://docs.google.com/gview?url={data}&embedded=true"'+N+"></iframe>",H='<video class="kv-preview-data file-preview-video" controls'+N+'>\n<source src="{data}" type="{type}">\n'+b.DEFAULT_PREVIEW+"\n</video>\n",I='<!--suppress ALL --><audio class="kv-preview-data file-preview-audio" controls'+N+'>\n<source src="{data}" type="{type}">\n'+b.DEFAULT_PREVIEW+"\n</audio>\n",J='<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash"'+N+">\n",L='<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf"'+N+">\n",K='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}"'+N+'>\n<param name="movie" value="{caption}" />\n'+b.OBJECT_PARAMS+" "+b.DEFAULT_PREVIEW+"\n</object>\n",M='<div class="kv-preview-data file-preview-other-frame"'+N+">\n"+b.DEFAULT_PREVIEW+"\n</div>\n",O='<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>',P={width:"100%",height:"100%","min-height":"480px"},R._isPdfRendered()&&(L=R.pdfRendererTemplate.replace("{renderer}",R._encodeURI(R.pdfRendererUrl))),R.defaults={layoutTemplates:{main1:c,main2:d,preview:e,close:g,fileIcon:f,caption:h,modalMain:l,modal:m,progress:n,stats:Q,size:o,footer:p,indicator:w,actions:q,actionDelete:r,actionUpload:s,actionDownload:t,actionZoom:u,actionDrag:v,btnDefault:i,btnLink:j,btnBrowse:k,zoomCache:O},previewMarkupTags:{tagBefore1:y,tagBefore2:z,tagAfter:A},previewContentTemplates:{generic:B,html:C,image:D,text:E,office:F,gdocs:G,video:H,audio:I,flash:J,object:K,pdf:L,other:M},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"100%",height:"160px"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%",
"max-height":"100%"},html:P,text:P,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:P,other:{width:"auto",height:"100%","min-height":"480px"}},mimeTypeAliases:{"video/quicktime":"video/mp4"},fileTypeSettings:{image:function(a,c){return b.compare(a,"image.*")&&!b.compare(a,/(tiff?|wmf)$/i)||b.compare(c,/\.(gif|png|jpe?g)$/i)},html:function(a,c){return b.compare(a,"text/html")||b.compare(c,/\.(htm|html)$/i)},office:function(a,c){return b.compare(a,/(word|excel|powerpoint|office)$/i)||b.compare(c,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(a,c){return b.compare(a,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||b.compare(c,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(a,c){return b.compare(a,"text.*")||b.compare(c,/\.(xml|javascript)$/i)||b.compare(c,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(a,c){return b.compare(a,"video.*")&&(b.compare(a,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||b.compare(c,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(a,c){return b.compare(a,"audio.*")&&(b.compare(c,/(ogg|mp3|mp?g|wav)$/i)||b.compare(c,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(a,c){return b.compare(a,"application/x-shockwave-flash",!0)||b.compare(c,/\.(swf)$/i)},pdf:function(a,c){return b.compare(a,"application/pdf",!0)||b.compare(c,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"></i>',downloadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"></i>',indicatorPaused:'<i class="glyphicon glyphicon-pause text-primary"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ...",indicatorPausedTitle:"Upload Paused"}},a.each(R.defaults,function(b,c){return"allowedPreviewTypes"===b?void(void 0===R.allowedPreviewTypes&&(R.allowedPreviewTypes=c)):void(R[b]=a.extend(!0,{},c,R[b]))}),R._initPreviewTemplates()},_initPreviewTemplates:function(){var c,d=this,e=d.previewMarkupTags,f=e.tagAfter;a.each(d.previewContentTemplates,function(a,g){b.isEmpty(d.previewTemplates[a])&&(c=e.tagBefore2,("generic"===a||"image"===a||"html"===a||"text"===a)&&(c=e.tagBefore1),d._isPdfRendered()&&"pdf"===a&&(c=c.replace("kv-file-content","kv-file-content kv-pdf-rendered")),d.previewTemplates[a]=c+g+f)})},_initPreviewCache:function(){var c=this;c.previewCache={data:{},init:function(){var a=c.initialPreview;a.length>0&&!b.isArray(a)&&(a=a.split(c.initialPreviewDelimiter)),c.previewCache.data={content:a,config:c.initialPreviewConfig,tags:c.initialPreviewThumbTags}},count:function(a){if(!c.previewCache.data||!c.previewCache.data.content)return 0;if(a){var b=c.previewCache.data.content.filter(function(a){return null!==a});return b.length}return c.previewCache.data.content.length},get:function(d,e){var f,g,h,i,j,k,l,m=b.INIT_FLAG+d,n=c.previewCache.data,o=n.config[d],p=n.content[d],q=b.ifSet("previewAsData",o,c.initialPreviewAsData),r=o?{title:o.title||null,alt:o.alt||null}:{title:null,alt:null},s=function(a,d,e,f,g,h,i,j){var k=" file-preview-initial "+b.SORT_CSS+(i?" "+i:""),l=c.previewInitId+"-"+b.INIT_FLAG+h,m=o&&o.fileId||l;return c._generatePreviewTemplate(a,d,e,f,l,m,!1,null,k,g,h,j,r,o&&o.zoomData||d)};return p&&p.length?(e=void 0===e?!0:e,h=b.ifSet("type",o,c.initialPreviewFileType||"generic"),j=b.ifSet("filename",o,b.ifSet("caption",o)),k=b.ifSet("filetype",o,h),i=c.previewCache.footer(d,e,o&&o.size||null),l=b.ifSet("frameClass",o),f=q?s(h,p,j,k,i,m,l):s("generic",p,j,k,i,m,l,h).setTokens({content:n.content[d]}),n.tags.length&&n.tags[d]&&(f=b.replaceTags(f,n.tags[d])),b.isEmpty(o)||b.isEmpty(o.frameAttr)||(g=a(document.createElement("div")).html(f),g.find(".file-preview-initial").attr(o.frameAttr),f=g.html(),g.remove()),f):""},clean:function(a){a.content=b.cleanArray(a.content),a.config=b.cleanArray(a.config),a.tags=b.cleanArray(a.tags),c.previewCache.data=a},add:function(a,d,e,f){var g=c.previewCache.data,h=a.length-1;return a&&a.length?(b.isArray(a)||(a=a.split(c.initialPreviewDelimiter)),f?(h=g.content.push(a[0])-1,g.config[h]=d,g.tags[h]=e):(g.content=a,g.config=d,g.tags=e),c.previewCache.clean(g),h):h},set:function(a,d,e,f){var g,h,i=c.previewCache.data;if(a&&a.length&&(b.isArray(a)||(a=a.split(c.initialPreviewDelimiter)),h=a.filter(function(a){return null!==a}),h.length)){if(void 0===i.content&&(i.content=[]),void 0===i.config&&(i.config=[]),void 0===i.tags&&(i.tags=[]),f){for(g=0;g<a.length;g++)a[g]&&i.content.push(a[g]);for(g=0;g<d.length;g++)d[g]&&i.config.push(d[g]);for(g=0;g<e.length;g++)e[g]&&i.tags.push(e[g])}else i.content=a,i.config=d,i.tags=e;c.previewCache.clean(i)}},unset:function(d){var e=c.previewCache.count(),f=c.reversePreviewOrder;if(e){if(1===e)return c.previewCache.data.content=[],c.previewCache.data.config=[],c.previewCache.data.tags=[],c.initialPreview=[],c.initialPreviewConfig=[],void(c.initialPreviewThumbTags=[]);c.previewCache.data.content=b.spliceArray(c.previewCache.data.content,d,f),c.previewCache.data.config=b.spliceArray(c.previewCache.data.config,d,f),c.previewCache.data.tags=b.spliceArray(c.previewCache.data.tags,d,f);var g=a.extend(!0,{},c.previewCache.data);c.previewCache.clean(g)}},out:function(){var a,b,d,e="",f=c.previewCache.count();if(0===f)return{content:"",caption:""};for(b=0;f>b;b++)d=c.previewCache.get(b),e=c.reversePreviewOrder?d+e:e+d;return a=c._getMsgSelected(f),{content:e,caption:a}},footer:function(a,d,e){var f=c.previewCache.data||{};if(b.isEmpty(f.content))return"";(b.isEmpty(f.config)||b.isEmpty(f.config[a]))&&(f.config[a]={}),d=void 0===d?!0:d;var g,h=f.config[a],i=b.ifSet("caption",h),j=b.ifSet("width",h,"auto"),k=b.ifSet("url",h,!1),l=b.ifSet("key",h,null),m=b.ifSet("fileId",h,null),n=c.fileActionSettings,o=c.initialPreviewShowDelete||!1,p=c.initialPreviewDownloadUrl?c.initialPreviewDownloadUrl+"?key="+l+(m?"&fileId="+m:""):"",q=h.downloadUrl||p,r=h.filename||h.caption||"",s=!!q,t=b.ifSet("showRemove",h,b.ifSet("showRemove",n,o)),u=b.ifSet("showDownload",h,b.ifSet("showDownload",n,s)),v=b.ifSet("showZoom",h,b.ifSet("showZoom",n,!0)),w=b.ifSet("showDrag",h,b.ifSet("showDrag",n,!0)),x=k===!1&&d;return u=u&&h.downloadUrl!==!1&&!!q,g=c._renderFileActions(h,!1,u,t,v,w,x,k,l,!0,q,r),c._getLayoutTemplate("footer").setTokens({progress:c._renderThumbProgress(),actions:g,caption:i,size:c._getSize(e),width:j,indicator:""})}},c.previewCache.init()},_isPdfRendered:function(){var a=this,b=a.usePdfRenderer,c="function"==typeof b?b():!!b;return c&&a.pdfRendererUrl},_handler:function(a,b,c){var d=this,e=d.namespace,f=b.split(" ").join(e+" ")+e;a&&a.length&&a.off(f).on(f,c)},_encodeURI:function(a){var b=this;return b.encodeUrl?encodeURI(a):a},_log:function(a,b){var c=this,d=c.$element.attr("id");d&&(a='"'+d+'": '+a),a="bootstrap-fileinput: "+a,"object"==typeof b&&a.setTokens(b),"undefined"!=typeof window.console.log?window.console.log(a):window.alert(a)},_validate:function(){var a=this,c="file"===a.$element.attr("type");return c||a._log(b.logMessages.badInputType),c},_errorsExist:function(){var b,c=this,d=c.$errorContainer.find("li");return d.length?!0:(b=a(document.createElement("div")).html(c.$errorContainer.html()),b.find(".kv-error-close").remove(),b.find("ul").remove(),!!a.trim(b.text()).length)},_errorHandler:function(a,b){var c=this,d=a.target.error,e=function(a){c._showError(a.replace("{name}",b))};e(d.code===d.NOT_FOUND_ERR?c.msgFileNotFound:d.code===d.SECURITY_ERR?c.msgFileSecured:d.code===d.NOT_READABLE_ERR?c.msgFileNotReadable:d.code===d.ABORT_ERR?c.msgFilePreviewAborted:c.msgFilePreviewError)},_addError:function(a){var b=this,c=b.$errorContainer;a&&c.length&&(c.html(b.errorCloseButton+a),b._handler(c.find(".kv-error-close"),"click",function(){setTimeout(function(){b.showPreview&&!b.getFrames().length&&b.clear(),c.fadeOut("slow")},b.processDelay)}))},_setValidationError:function(a){var c=this;a=(a?a+" ":"")+"has-error",c.$container.removeClass(a).addClass("has-error"),b.addCss(c.$captionContainer,"is-invalid")},_resetErrors:function(a){var b=this,c=b.$errorContainer;b.isError=!1,b.$container.removeClass("has-error"),b.$captionContainer.removeClass("is-invalid"),c.html(""),a?c.fadeOut("slow"):c.hide()},_showFolderError:function(a){var b,c=this,d=c.$errorContainer;a&&(c.isAjaxUpload||c._clearFileInput(),b=c.msgFoldersNotAllowed.replace("{n}",a),c._addError(b),c._setValidationError(),d.fadeIn(800),c._raise("filefoldererror",[a,b]))},_showFileError:function(a,b,c){var d=this,e=d.$errorContainer,f=c||"fileuploaderror",g=b&&b.fileId||"",h=b&&b.id?'<li data-thumb-id="'+b.id+'" data-file-id="'+g+'">'+a+"</li>":"<li>"+a+"</li>";return 0===e.find("ul").length?d._addError("<ul>"+h+"</ul>"):e.find("ul").append(h),e.fadeIn(800),d._raise(f,[b,a]),d._setValidationError("file-input-new"),!0},_showError:function(a,b,c){var d=this,e=d.$errorContainer,f=c||"fileerror";return b=b||{},b.reader=d.reader,d._addError(a),e.fadeIn(800),d._raise(f,[b,a]),d.isAjaxUpload||d._clearFileInput(),d._setValidationError("file-input-new"),d.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(a){var b=this,c=b.minFileCount>1?b.filePlural:b.fileSingle,d=b.msgFilesTooLess.replace("{n}",b.minFileCount).replace("{files}",c),e=b.$errorContainer;b._addError(d),b.isError=!0,b._updateFileDetails(0),e.fadeIn(800),b._raise("fileerror",[a,d]),b._clearFileInput(),b._setValidationError()},_parseError:function(b,c,d,e){var f,g=this,h=a.trim(d+""),i=void 0!==c.responseJSON&&void 0!==c.responseJSON.error?c.responseJSON.error:c.responseText;return g.cancelling&&g.msgUploadAborted&&(h=g.msgUploadAborted),g.showAjaxErrorDetails&&i&&(i=a.trim(i.replace(/\n\s*\n/g,"\n")),f=i.length?"<pre>"+i+"</pre>":"",h+=h?f:i),h||(h=g.msgAjaxError.replace("{operation}",b)),g.cancelling=!1,e?"<b>"+e+": </b>"+h:h},_parseFileType:function(a,c){var d,e,f,g,h=this,i=h.allowedPreviewTypes||[];if("application/text-plain"===a)return"text";for(g=0;g<i.length;g++)if(f=i[g],d=h.fileTypeSettings[f],e=d(a,c)?f:"",!b.isEmpty(e))return e;return"other"},_getPreviewIcon:function(b){var c,d=this,e=null;return b&&b.indexOf(".")>-1&&(c=b.split(".").pop(),d.previewFileIconSettings&&(e=d.previewFileIconSettings[c]||d.previewFileIconSettings[c.toLowerCase()]||null),d.previewFileExtSettings&&a.each(d.previewFileExtSettings,function(a,b){return d.previewFileIconSettings[a]&&b(c)?void(e=d.previewFileIconSettings[a]):void 0})),e||d.previewFileIcon},_parseFilePreviewIcon:function(a,b){var c=this,d=c._getPreviewIcon(b),e=a;return e.indexOf("{previewFileIcon}")>-1&&(e=e.setTokens({previewFileIconClass:c.previewFileIconClass,previewFileIcon:d})),e},_raise:function(b,c){var d=this,e=a.Event(b);if(void 0!==c?d.$element.trigger(e,c):d.$element.trigger(e),e.isDefaultPrevented()||e.result===!1)return!1;switch(b){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:d.ajaxAborted||(d.ajaxAborted=e.result)}return!0},_listenFullScreen:function(a){var b,c,d=this,e=d.$modal;e&&e.length&&(b=e&&e.find(".btn-fullscreen"),c=e&&e.find(".btn-borderless"),b.length&&c.length&&(b.removeClass("active").attr("aria-pressed","false"),c.removeClass("active").attr("aria-pressed","false"),a?b.addClass("active").attr("aria-pressed","true"):c.addClass("active").attr("aria-pressed","true"),e.hasClass("file-zoom-fullscreen")?d._maximizeZoomDialog():a?d._maximizeZoomDialog():c.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var c,d=this,e=d.$element,f=d.$form,g=d.$container;d._handler(e,"click",function(a){e.hasClass("file-no-browse")&&(e.data("zoneClicked")?e.data("zoneClicked",!1):a.preventDefault())}),d._handler(e,"change",a.proxy(d._change,d)),d.showBrowse&&d._handler(d.$btnFile,"click",a.proxy(d._browse,d)),d._handler(g.find(".fileinput-remove:not([disabled])"),"click",a.proxy(d.clear,d)),d._handler(g.find(".fileinput-cancel"),"click",a.proxy(d.cancel,d)),d._handler(g.find(".fileinput-pause"),"click",a.proxy(d.pause,d)),d._initDragDrop(),d._handler(f,"reset",a.proxy(d.clear,d)),d.isAjaxUpload||d._handler(f,"submit",a.proxy(d._submitForm,d)),d._handler(d.$container.find(".fileinput-upload"),"click",a.proxy(d._uploadClick,d)),d._handler(a(window),"resize",function(){d._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),c="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",d._handler(a(document),c,function(){d._listenFullScreen(b.checkFullScreen())}),d._autoFitContent(),d._initClickable(),d._refreshPreview()},_autoFitContent:function(){var b,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=this,e=400>c?d.previewSettingsSmall||d.defaults.previewSettingsSmall:d.previewSettings||d.defaults.previewSettings;a.each(e,function(a,c){b=".file-preview-frame .file-preview-"+a,d.$preview.find(b+".kv-preview-data,"+b+" .kv-preview-data").css(c)})},_scanDroppedItems:function(a,c,d){d=d||"";var e,f,g,h=this,i=function(a){h._log(b.logMessages.badDroppedFiles),h._log(a)};a.isFile?a.file(function(a){c.push(a)},i):a.isDirectory&&(f=a.createReader(),(g=function(){f.readEntries(function(b){if(b&&b.length>0){for(e=0;e<b.length;e++)h._scanDroppedItems(b[e],c,d+a.name+"/");g()}return null},i)})())},_initDragDrop:function(){var b=this,c=b.$dropZone;b.dropZoneEnabled&&b.showPreview&&(b._handler(c,"dragenter dragover",a.proxy(b._zoneDragEnter,b)),b._handler(c,"dragleave",a.proxy(b._zoneDragLeave,b)),b._handler(c,"drop",a.proxy(b._zoneDrop,b)),b._handler(a(document),"dragenter dragover drop",b._zoneDragDropInit))},_zoneDragDropInit:function(a){a.stopPropagation(),a.preventDefault()},_zoneDragEnter:function(c){var d=this,e=c.originalEvent.dataTransfer,f=a.inArray("Files",e.types)>-1;return d._zoneDragDropInit(c),d.isDisabled||!f?(c.originalEvent.dataTransfer.effectAllowed="none",void(c.originalEvent.dataTransfer.dropEffect="none")):void(d._raise("fileDragEnter",{sourceEvent:c,files:e.types.Files})&&b.addCss(d.$dropZone,"file-highlighted"))},_zoneDragLeave:function(a){var b=this;b._zoneDragDropInit(a),b.isDisabled||b._raise("fileDragLeave",{sourceEvent:a})&&b.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(a){var c,d=this,e=d.$element,f=a.originalEvent.dataTransfer,g=f.files,h=f.items,i=b.getDragDropFolders(h),j=function(){d.isAjaxUpload?d._change(a,g):(d.changeTriggered=!0,e.get(0).files=g,setTimeout(function(){d.changeTriggered=!1,e.trigger("change"+d.namespace)},d.processDelay)),d.$dropZone.removeClass("file-highlighted")};if(a.preventDefault(),!d.isDisabled&&!b.isEmpty(g)&&d._raise("fileDragDrop",{sourceEvent:a,files:g}))if(i>0){if(!d.isAjaxUpload)return void d._showFolderError(i);for(g=[],c=0;c<h.length;c++){var k=h[c].webkitGetAsEntry();k&&d._scanDroppedItems(k,g)}setTimeout(function(){j()},500)}else j()},_uploadClick:function(a){var c,d=this,e=d.$container.find(".fileinput-upload"),f=!e.hasClass("disabled")&&b.isEmpty(e.attr("disabled"));if(!a||!a.isDefaultPrevented()){if(!d.isAjaxUpload)return void(f&&"submit"!==e.attr("type")&&(c=e.closest("form"),c.length&&c.trigger("submit"),a.preventDefault()));a.preventDefault(),f&&d.upload()}},_submitForm:function(){var a=this;return a._isFileSelectionValid()&&!a._abort({})},_clearPreview:function(){var c=this,d=c.showUploadedThumbs?c.getFrames(":not(.file-preview-success)"):c.getFrames();d.each(function(){var d=a(this),e=d.attr("id"),f=c._getZoom(e);d.remove(),b.cleanZoomCache(f)}),c.getFrames().length&&c.showPreview||c._resetUpload(),c._validateDefaultPreview()},_initSortable:function(){var c,d=this,e=d.$preview,f="."+b.SORT_CSS,g=d.reversePreviewOrder;window.KvSortable&&0!==e.find(f).length&&(c={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:!1,draggable:f,onSort:function(c){var e=c.oldIndex,f=c.newIndex,h=0;d.initialPreview=b.moveArray(d.initialPreview,e,f,g),d.initialPreviewConfig=b.moveArray(d.initialPreviewConfig,e,f,g),d.previewCache.init(),d.getFrames(".file-preview-initial").each(function(){a(this).attr("data-fileindex",b.INIT_FLAG+h),h++}),d._raise("filesorted",{previewId:a(c.item).attr("id"),oldIndex:e,newIndex:f,stack:d.initialPreviewConfig})}},e.data("kvsortable")&&e.kvsortable("destroy"),a.extend(!0,c,d.fileActionSettings.dragSettings),e.kvsortable(c))},_setPreviewContent:function(a){var b=this;b.$preview.html(a),b._autoFitContent()},_initPreviewImageOrientations:function(){var b=this,c=0;b.autoOrientImageInitial&&b.getFrames(".file-preview-initial").each(function(){var d,e,f,g=a(this),h=b.initialPreviewConfig[c];h&&h.exif&&h.exif.Orientation&&(f=g.attr("id"),d=g.find(">.kv-file-content img"),e=b._getZoom(f," >.kv-file-content img"),b.setImageOrientation(d,e,h.exif.Orientation,g)),c++})},_initPreview:function(a){var c,d=this,e=d.initialCaption||"";return d.previewCache.count(!0)?(c=d.previewCache.out(),e=a&&d.initialCaption?d.initialCaption:c.caption,d._setPreviewContent(c.content),d._setInitThumbAttr(),d._setCaption(e),d._initSortable(),b.isEmpty(c.content)||d.$container.removeClass("file-input-new"),void d._initPreviewImageOrientations()):(d._clearPreview(),void(a?d._setCaption(e):d._initCaption()))},_getZoomButton:function(a){var b=this,c=b.previewZoomButtonIcons[a],d=b.previewZoomButtonClasses[a],e=' title="'+(b.previewZoomButtonTitles[a]||"")+'" ',f=e+("close"===a?' data-dismiss="modal" aria-hidden="true"':"");return("fullscreen"===a||"borderless"===a||"toggleheader"===a)&&(f+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+d+" btn-"+a+'"'+f+">"+c+"</button>"},_getModalContent:function(){var a=this;return a._getLayoutTemplate("modal").setTokens({rtl:a.rtl?" kv-rtl":"",zoomFrameClass:a.frameClass,heading:a.msgZoomModalHeading,prev:a._getZoomButton("prev"),next:a._getZoomButton("next"),toggleheader:a._getZoomButton("toggleheader"),fullscreen:a._getZoomButton("fullscreen"),borderless:a._getZoomButton("borderless"),close:a._getZoomButton("close")})},_listenModalEvent:function(a){var c=this,d=c.$modal,e=function(a){return{sourceEvent:a,previewId:d.data("previewId"),modal:d}};d.on(a+".bs.modal",function(f){var g=d.find(".btn-fullscreen"),h=d.find(".btn-borderless");c._raise("filezoom"+a,e(f)),"shown"===a&&(h.removeClass("active").attr("aria-pressed","false"),g.removeClass("active").attr("aria-pressed","false"),d.hasClass("file-zoom-fullscreen")&&(c._maximizeZoomDialog(),b.checkFullScreen()?g.addClass("active").attr("aria-pressed","true"):h.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var c,d=this,e=d._getLayoutTemplate("modalMain"),f="#"+b.MODAL_ID;d.showPreview&&(d.$modal=a(f),d.$modal&&d.$modal.length||(c=a(document.createElement("div")).html(e).insertAfter(d.$container),d.$modal=a(f).insertBefore(c),c.remove()),b.initModal(d.$modal),d.$modal.html(d._getModalContent()),a.each(b.MODAL_EVENTS,function(a,b){d._listenModalEvent(b)}))},_initZoomButtons:function(){var b,c,d=this,e=d.$modal.data("previewId")||"",f=d.getFrames().toArray(),g=f.length,h=d.$modal.find(".btn-prev"),i=d.$modal.find(".btn-next");return f.length<2?(h.hide(),void i.hide()):(h.show(),i.show(),void(g&&(b=a(f[0]),c=a(f[g-1]),h.removeAttr("disabled"),i.removeAttr("disabled"),b.length&&b.attr("id")===e&&h.attr("disabled",!0),c.length&&c.attr("id")===e&&i.attr("disabled",!0))))},_maximizeZoomDialog:function(){var b=this,c=b.$modal,d=c.find(".modal-header:visible"),e=c.find(".modal-footer:visible"),f=c.find(".modal-body"),g=a(window).height(),h=0;c.addClass("file-zoom-fullscreen"),d&&d.length&&(g-=d.outerHeight(!0)),e&&e.length&&(g-=e.outerHeight(!0)),f&&f.length&&(h=f.outerHeight(!0)-f.height(),g-=h),c.find(".kv-zoom-body").height(g)},_resizeZoomDialog:function(a){var c=this,d=c.$modal,e=d.find(".btn-fullscreen"),f=d.find(".btn-borderless");if(d.hasClass("file-zoom-fullscreen"))b.toggleFullScreen(!1),a?e.hasClass("active")||(d.removeClass("file-zoom-fullscreen"),c._resizeZoomDialog(!0),f.hasClass("active")&&f.removeClass("active").attr("aria-pressed","false")):e.hasClass("active")?e.removeClass("active").attr("aria-pressed","false"):(d.removeClass("file-zoom-fullscreen"),c.$modal.find(".kv-zoom-body").css("height",c.zoomModalHeight));else{if(!a)return void c._maximizeZoomDialog();b.toggleFullScreen(!0)}d.focus()},_setZoomContent:function(c,d){var e,f,g,h,i,j,k,l,m,n,o=this,p=c.attr("id"),q=o._getZoom(p),r=o.$modal,s=r.find(".btn-fullscreen"),t=r.find(".btn-borderless"),u=r.find(".btn-toggleheader");f=q.attr("data-template")||"generic",e=q.find(".kv-file-content"),g=e.length?e.html():"",m=c.data("caption")||"",n=c.data("size")||"",h=m+" "+n,r.find(".kv-zoom-title").attr("title",a("<div/>").html(h).text()).html(h),i=r.find(".kv-zoom-body"),r.removeClass("kv-single-content"),d?(l=i.addClass("file-thumb-loading").clone().insertAfter(i),i.html(g).hide(),l.fadeOut("fast",function(){i.fadeIn("fast",function(){i.removeClass("file-thumb-loading")}),l.remove()})):i.html(g),k=o.previewZoomSettings[f],k&&(j=i.find(".kv-preview-data"),b.addCss(j,"file-zoom-detail"),a.each(k,function(a,b){j.css(a,b),(j.attr("width")&&"width"===a||j.attr("height")&&"height"===a)&&j.removeAttr(a)})),r.data("previewId",p),o._handler(r.find(".btn-prev"),"click",function(){o._zoomSlideShow("prev",p)}),o._handler(r.find(".btn-next"),"click",function(){o._zoomSlideShow("next",p)}),o._handler(s,"click",function(){o._resizeZoomDialog(!0)}),o._handler(t,"click",function(){o._resizeZoomDialog(!1)}),o._handler(u,"click",function(){var a,b=r.find(".modal-header"),c=r.find(".modal-body .floating-buttons"),d=b.find(".kv-zoom-actions"),e=function(a){var c=o.$modal.find(".kv-zoom-body"),d=o.zoomModalHeight;r.hasClass("file-zoom-fullscreen")&&(d=c.outerHeight(!0),a||(d-=b.outerHeight(!0))),c.css("height",a?d+a:d)};b.is(":visible")?(a=b.outerHeight(!0),b.slideUp("slow",function(){d.find(".btn").appendTo(c),e(a)})):(c.find(".btn").appendTo(d),b.slideDown("slow",function(){e()})),r.focus()}),o._handler(r,"keydown",function(b){var c=b.which||b.keyCode,d=a(this).find(".btn-prev"),e=a(this).find(".btn-next"),f=a(this).data("previewId"),g=o.rtl?39:37,h=o.rtl?37:39;c===g&&d.length&&!d.attr("disabled")&&o._zoomSlideShow("prev",f),c===h&&e.length&&!e.attr("disabled")&&o._zoomSlideShow("next",f)})},_zoomPreview:function(a){var c,d=this,e=d.$modal;if(!a.length)throw"Cannot zoom to detailed preview!";b.initModal(e),e.html(d._getModalContent()),c=a.closest(b.FRAMES),d._setZoomContent(c),e.modal("show"),d._initZoomButtons()},_zoomSlideShow:function(b,c){var d,e,f,g=this,h=g.$modal.find(".kv-zoom-actions .btn-"+b),i=g.getFrames().toArray(),j=i.length;if(!h.attr("disabled")){for(e=0;j>e;e++)if(a(i[e]).attr("id")===c){f="prev"===b?e-1:e+1;break}0>f||f>=j||!i[f]||(d=a(i[f]),d.length&&g._setZoomContent(d,!0),g._initZoomButtons(),g._raise("filezoom"+b,{previewId:c,modal:g.$modal}))}},_initZoomButton:function(){var b=this;b.$preview.find(".kv-file-zoom").each(function(){var c=a(this);b._handler(c,"click",function(){b._zoomPreview(c)})})},_inputFileCount:function(){return this.$element.get(0).files.length},_refreshPreview:function(){var b,c=this;(c._inputFileCount()||c.isAjaxUpload)&&c.showPreview&&c.isPreviewable&&(c.isAjaxUpload&&c.fileManager.count()>0?(b=a.extend(!0,{},c.fileManager.stack),c.fileManager.clear(),c._clearFileInput()):b=c.$element.get(0).files,b&&b.length&&(c.readFiles(b),c._setFileDropZoneTitle()))},_clearObjects:function(b){b.find("video audio").each(function(){this.pause(),a(this).remove()}),b.find("img object div").each(function(){a(this).remove()})},_clearFileInput:function(){var b,c,d,e=this,f=e.$element;e._inputFileCount()&&(b=f.closest("form"),c=a(document.createElement("form")),d=a(document.createElement("div")),f.before(d),b.length?b.after(c):d.after(c),c.append(f).trigger("reset"),d.before(f).remove(),c.remove())},_resetUpload:function(){var a=this;a.uploadCache={content:[],config:[],tags:[],append:!0},a.$btnUpload.removeAttr("disabled"),a._setProgress(0),a.$progress.hide(),a._resetErrors(!1),a._initAjax(),a.fileManager.clearImages(),a._resetCanvas(),a.cacheInitialPreview={},a.overwriteInitial&&(a.initialPreview=[],a.initialPreviewConfig=[],a.initialPreviewThumbTags=[],a.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var a=this;a.canvas&&a.imageCanvasContext&&a.imageCanvasContext.clearRect(0,0,a.canvas.width,a.canvas.height)},_hasInitialPreview:function(){var a=this;return!a.overwriteInitial&&a.previewCache.count(!0)},_resetPreview:function(){var a,b,c=this;c.previewCache.count(!0)?(a=c.previewCache.out(),c._setPreviewContent(a.content),c._setInitThumbAttr(),b=c.initialCaption?c.initialCaption:a.caption,c._setCaption(b)):(c._clearPreview(),c._initCaption()),c.showPreview&&(c._initZoom(),c._initSortable())},_clearDefaultPreview:function(){var a=this;a.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var a=this;a.showPreview&&!b.isEmpty(a.defaultPreviewContent)&&(a._setPreviewContent('<div class="file-default-preview">'+a.defaultPreviewContent+"</div>"),a.$container.removeClass("file-input-new"),a._initClickable())},_resetPreviewThumbs:function(a){var b,c=this;return a?(c._clearPreview(),void c.clearFileStack()):void(c._hasInitialPreview()?(b=c.previewCache.out(),c._setPreviewContent(b.content),c._setInitThumbAttr(),c._setCaption(b.caption),c._initPreviewActions()):c._clearPreview())},_getLayoutTemplate:function(a){var c=this,d=c.layoutTemplates[a];return b.isEmpty(c.customLayoutTags)?d:b.replaceTags(d,c.customLayoutTags)},_getPreviewTemplate:function(a){var c=this,d=c.previewTemplates[a];return b.isEmpty(c.customPreviewTags)?d:b.replaceTags(d,c.customPreviewTags)},_getOutData:function(a,b,c,d){var e=this;return b=b||{},c=c||{},d=d||e.fileManager.list(),{formdata:a,files:d,filenames:e.filenames,filescount:e.getFilesCount(),extra:e._getExtraData(),response:c,reader:e.reader,jqXHR:b}},_getMsgSelected:function(a){var b=this,c=1===a?b.fileSingle:b.filePlural;return a>0?b.msgSelected.replace("{n}",a).replace("{files}",c):b.msgNoFilesSelected},_getFrame:function(a,c){var d=this,e=b.getFrameElement(d.$preview,a,c);return e.length||d._log(b.logMessages.invalidThumb,{id:a}),e},_getZoom:function(a,c){var d=this,e=b.getZoomElement(d.$preview,a,c);return e.length||d._log(b.logMessages.invalidThumb,{id:a}),e},_getThumbs:function(a){return a=a||"",this.getFrames(":not(.file-preview-initial)"+a)},_getThumbId:function(a){var b=this;return b.previewInitId+"-"+a},_getExtraData:function(a,b){var c=this,d=c.uploadExtraData;return"function"==typeof c.uploadExtraData&&(d=c.uploadExtraData(a,b)),d},_initXhr:function(a,c,d){var e=this,f=e.fileManager,g=function(a){var g=0,h=a.total,i=a.loaded||a.position,j=f.getUploadStats(c,i,h);a.lengthComputable&&!e.enableResumableUpload&&(g=b.round(i/h*100)),c?e._setFileUploadStats(c,g,d,j):e._setProgress(g,null,null,e._getStats(j)),e._raise("fileajaxprogress",[j])};return a.upload&&(e.progressDelay&&(g=b.debounce(g,e.progressDelay)),a.upload.addEventListener("progress",g,!1)),a},_initAjaxSettings:function(){var b=this;b._ajaxSettings=a.extend(!0,{},b.ajaxSettings),b._ajaxDeleteSettings=a.extend(!0,{},b.ajaxDeleteSettings)},_mergeAjaxCallback:function(a,b,c){var d,e=this,f=e._ajaxSettings,g=e.mergeAjaxCallbacks;"delete"===c&&(f=e._ajaxDeleteSettings,g=e.mergeAjaxDeleteCallbacks),d=f[a],g&&"function"==typeof d?"before"===g?f[a]=function(){d.apply(this,arguments),b.apply(this,arguments)}:f[a]=function(){b.apply(this,arguments),d.apply(this,arguments)}:f[a]=b},_ajaxSubmit:function(b,c,d,e,f,g,h,i){var j,k,l,m,n=this;n._raise("filepreajax",[f,g,h])&&(f.append("initialPreview",JSON.stringify(n.initialPreview)),f.append("initialPreviewConfig",JSON.stringify(n.initialPreviewConfig)),f.append("initialPreviewThumbTags",JSON.stringify(n.initialPreviewThumbTags)),n._initAjaxSettings(),n._mergeAjaxCallback("beforeSend",b),n._mergeAjaxCallback("success",c),n._mergeAjaxCallback("complete",d),n._mergeAjaxCallback("error",e),i=i||n.uploadUrlThumb||n.uploadUrl,"function"==typeof i&&(i=i()),l=n._getExtraData(g,h)||{},"object"==typeof l&&a.each(l,function(a,b){f.append(a,b)}),k={xhr:function(){var b=a.ajaxSettings.xhr();return n._initXhr(b,g,n.fileManager.count())},url:n._encodeURI(i),type:"POST",dataType:"json",data:f,cache:!1,processData:!1,contentType:!1},j=a.extend(!0,{},k,n._ajaxSettings),n.ajaxQueue.push(j),m=function(){var b,c;n.ajaxCurrentThreads<n.maxAjaxThreads&&(b=n.ajaxQueue.shift(),"undefined"!=typeof b&&(n.ajaxCurrentThreads++,c=a.ajax(b).done(function(){clearInterval(n.ajaxQueueIntervalId),n.ajaxCurrentThreads--}),n.ajaxRequests.push(c)))},n.ajaxQueueIntervalId=setInterval(m,n.queueDelay))},_mergeArray:function(a,c){var d=this,e=b.cleanArray(d[a]),f=b.cleanArray(c);d[a]=e.concat(f)},_initUploadSuccess:function(c,d,e){var f,g,h,i,j,k,l,m,n,o=this;o.showPreview&&"object"==typeof c&&!a.isEmptyObject(c)&&void 0!==c.initialPreview&&c.initialPreview.length>0&&(o.hasInitData=!0,k=c.initialPreview||[],l=c.initialPreviewConfig||[],m=c.initialPreviewThumbTags||[],f=void 0===c.append||c.append,k.length>0&&!b.isArray(k)&&(k=k.split(o.initialPreviewDelimiter)),k.length&&(o._mergeArray("initialPreview",k),o._mergeArray("initialPreviewConfig",l),o._mergeArray("initialPreviewThumbTags",m)),void 0!==d?e?(n=d.attr("data-fileindex"),o.uploadCache.content[n]=k[0],o.uploadCache.config[n]=l[0]||[],o.uploadCache.tags[n]=m[0]||[],o.uploadCache.append=f):(h=o.previewCache.add(k[0],l[0],m[0],f),g=o.previewCache.get(h,!1),i=a(document.createElement("div")).html(g).hide().insertAfter(d),j=i.find(".kv-zoom-cache"),j&&j.length&&j.insertAfter(d),d.fadeOut("slow",function(){var a=i.find(".file-preview-frame");a&&a.length&&a.insertBefore(d).fadeIn("slow").css("display:inline-block"),o._initPreviewActions(),o._clearFileInput(),b.cleanZoomCache(o._getZoom(d.attr("id"))),d.remove(),i.remove(),o._initSortable()})):(o.previewCache.set(k,l,m,f),o._initPreview(),o._initPreviewActions()))},_initSuccessThumbs:function(){var c=this;c.showPreview&&c._getThumbs(b.FRAMES+".file-preview-success").each(function(){var d=a(this),e=d.find(".kv-file-remove");e.removeAttr("disabled"),c._handler(e,"click",function(){var a=d.attr("id"),e=c._raise("filesuccessremove",[a,d.attr("data-fileindex")]);b.cleanMemory(d),e!==!1&&d.fadeOut("slow",function(){b.cleanZoomCache(c._getZoom(a)),d.remove(),c.getFrames().length||c.reset()})})})},_updateInitialPreview:function(){var a,c,d=this,e=d.uploadCache,f=0,g=d.cacheInitialPreview;
if(g&&g.content&&(f=g.content.length),d.showPreview){if(d.previewCache.set(e.content,e.config,e.tags,e.append),f){for(a=0;a<e.content.length;a++)c=a+f,g.content[c]=e.content[a],g.config.length&&(g.config[c]=e.config[a]),g.tags.length&&(g.tags[c]=e.tags[a]);d.initialPreview=b.cleanArray(g.content),d.initialPreviewConfig=b.cleanArray(g.config),d.initialPreviewThumbTags=b.cleanArray(g.tags)}else d.initialPreview=e.content,d.initialPreviewConfig=e.config,d.initialPreviewThumbTags=e.tags;d.cacheInitialPreview={},d.hasInitData&&(d._initPreview(),d._initPreviewActions())}},_uploadSingle:function(c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s=this,t=s.fileManager,u=t.count(),v=new FormData,w=s._getThumbId(d),x=u>0||!a.isEmptyObject(s.uploadExtraData),y=s.ajaxOperations.uploadThumb,z=t.getFile(d),A={id:w,index:c,fileId:d},B=s.fileManager.getFileName(d,!0);s.enableResumableUpload||(s.showPreview&&(g=s.fileManager.getThumb(d),l=g.find(".file-thumb-progress"),i=g.find(".kv-file-upload"),j=g.find(".kv-file-remove"),l.show()),0===u||!x||s.showPreview&&i&&i.hasClass("disabled")||s._abort(A)||(r=function(){k?t.errors.push(d):t.removeFile(d),t.setProcessed(d),t.isProcessed()&&(s.fileBatchCompleted=!0)},h=function(){var a;s.fileBatchCompleted&&setTimeout(function(){var c=0===t.count(),d=t.errors.length;s._updateInitialPreview(),s.unlock(c),c&&s._clearFileInput(),a=s.$preview.find(".file-preview-initial"),s.uploadAsync&&a.length&&(b.addCss(a,b.SORT_CSS),s._initSortable()),s._raise("filebatchuploadcomplete",[t.stack,s._getExtraData()]),s.retryErrorUploads&&0!==d||t.clear(),s._setProgress(101),s.ajaxAborted=!1},s.processDelay)},m=function(h){f=s._getOutData(v,h),t.initStats(d),s.fileBatchCompleted=!1,e||(s.ajaxAborted=!1),s.showPreview&&(g.hasClass("file-preview-success")||(s._setThumbStatus(g,"Loading"),b.addCss(g,"file-uploading")),i.attr("disabled",!0),j.attr("disabled",!0)),e||s.lock(),-1!==t.errors.indexOf(d)&&delete t.errors[d],s._raise("filepreupload",[f,w,c]),a.extend(!0,A,f),s._abort(A)&&(h.abort(),e||(s._setThumbStatus(g,"New"),g.removeClass("file-uploading"),i.removeAttr("disabled"),j.removeAttr("disabled"),s.unlock()),s._setProgressCancelled())},o=function(h,j,m){var o=s.showPreview&&g.attr("id")?g.attr("id"):w;f=s._getOutData(v,m,h),a.extend(!0,A,f),setTimeout(function(){b.isEmpty(h)||b.isEmpty(h.error)?(s.showPreview&&(s._setThumbStatus(g,"Success"),i.hide(),s._initUploadSuccess(h,g,e),s._setProgress(101,l)),s._raise("fileuploaded",[f,o,c]),e?r():s.fileManager.remove(g)):(k=!0,n=s._parseError(y,m,s.msgUploadError,s.fileManager.getFileName(d)),s._showFileError(n,A),s._setPreviewError(g,!0),s.retryErrorUploads||i.hide(),e&&r(),s._setProgress(101,s._getFrame(o).find(".file-thumb-progress"),s.msgUploadError))},s.processDelay)},p=function(){setTimeout(function(){s.showPreview&&(i.removeAttr("disabled"),j.removeAttr("disabled"),g.removeClass("file-uploading")),e?h():(s.unlock(!1),s._clearFileInput()),s._initSuccessThumbs()},s.processDelay)},q=function(b,c,f){n=s._parseError(y,b,f,s.fileManager.getFileName(d)),k=!0,setTimeout(function(){e&&r(),s.fileManager.setProgress(d,100),s._setPreviewError(g,!0),s.retryErrorUploads||i.hide(),a.extend(!0,A,s._getOutData(v,b)),s._setProgress(101,l,s.msgAjaxProgressError.replace("{operation}",y)),s._setProgress(101,g.find(".file-thumb-progress"),s.msgUploadError),s._showFileError(n,A)},s.processDelay)},v.append(s.uploadFileAttr,z.file,B),s._setUploadData(v,{fileId:d}),s._ajaxSubmit(m,o,p,q,v,d,c)))},_uploadBatch:function(){var c,d,e,f,g,h,i=this,j=i.fileManager,k=j.total(),l={},m=k>0||!a.isEmptyObject(i.uploadExtraData),n=new FormData,o=i.ajaxOperations.uploadBatch;if(0!==k&&m&&!i._abort(l)){h=function(){i.fileManager.clear(),i._clearFileInput()},c=function(c){i.lock(),j.initStats();var d=i._getOutData(n,c);i.ajaxAborted=!1,i.showPreview&&i._getThumbs().each(function(){var c=a(this),d=c.find(".kv-file-upload"),e=c.find(".kv-file-remove");c.hasClass("file-preview-success")||(i._setThumbStatus(c,"Loading"),b.addCss(c,"file-uploading")),d.attr("disabled",!0),e.attr("disabled",!0)}),i._raise("filebatchpreupload",[d]),i._abort(d)&&(c.abort(),i._getThumbs().each(function(){var b=a(this),c=b.find(".kv-file-upload"),d=b.find(".kv-file-remove");b.hasClass("file-preview-loading")&&(i._setThumbStatus(b,"New"),b.removeClass("file-uploading")),c.removeAttr("disabled"),d.removeAttr("disabled")}),i._setProgressCancelled())},d=function(c,d,e){var f=i._getOutData(n,e,c),j=0,k=i._getThumbs(":not(.file-preview-success)"),l=b.isEmpty(c)||b.isEmpty(c.errorkeys)?[]:c.errorkeys;b.isEmpty(c)||b.isEmpty(c.error)?(i._raise("filebatchuploadsuccess",[f]),h(),i.showPreview?(k.each(function(){var b=a(this);i._setThumbStatus(b,"Success"),b.removeClass("file-uploading"),b.find(".kv-file-upload").hide().removeAttr("disabled")}),i._initUploadSuccess(c)):i.reset(),i._setProgress(101)):(i.showPreview&&(k.each(function(){var b=a(this);b.removeClass("file-uploading"),b.find(".kv-file-upload").removeAttr("disabled"),b.find(".kv-file-remove").removeAttr("disabled"),0===l.length||-1!==a.inArray(j,l)?(i._setPreviewError(b,!0),i.retryErrorUploads||(b.find(".kv-file-upload").hide(),i.fileManager.remove(b))):(b.find(".kv-file-upload").hide(),i._setThumbStatus(b,"Success"),i.fileManager.remove(b)),(!b.hasClass("file-preview-error")||i.retryErrorUploads)&&j++}),i._initUploadSuccess(c)),g=i._parseError(o,e,i.msgUploadError),i._showFileError(g,f,"filebatchuploaderror"),i._setProgress(101,i.$progress,i.msgUploadError))},f=function(){i.unlock(),i._initSuccessThumbs(),i._clearFileInput(),i._raise("filebatchuploadcomplete",[i.fileManager.stack,i._getExtraData()])},e=function(b,c,d){var e=i._getOutData(n,b);g=i._parseError(o,b,d),i._showFileError(g,e,"filebatchuploaderror"),i.uploadFileCount=k-1,i.showPreview&&(i._getThumbs().each(function(){var b=a(this);b.removeClass("file-uploading"),i.fileManager.getFile(b.attr("data-fileid"))&&i._setPreviewError(b)}),i._getThumbs().removeClass("file-uploading"),i._getThumbs(" .kv-file-upload").removeAttr("disabled"),i._getThumbs(" .kv-file-delete").removeAttr("disabled"),i._setProgress(101,i.$progress,i.msgAjaxProgressError.replace("{operation}",o)))};var p=0;a.each(i.fileManager.stack,function(a,c){b.isEmpty(c.file)||n.append(i.uploadFileAttr,c.file,c.nameFmt||"untitled_"+p),p++}),i._ajaxSubmit(c,d,f,e,n)}},_uploadExtraOnly:function(){var a,c,d,e,f,g=this,h={},i=new FormData,j=g.ajaxOperations.uploadExtra;g._abort(h)||(a=function(a){g.lock();var b=g._getOutData(i,a);g._raise("filebatchpreupload",[b]),g._setProgress(50),h.data=b,h.xhr=a,g._abort(h)&&(a.abort(),g._setProgressCancelled())},c=function(a,c,d){var e=g._getOutData(i,d,a);b.isEmpty(a)||b.isEmpty(a.error)?(g._raise("filebatchuploadsuccess",[e]),g._clearFileInput(),g._initUploadSuccess(a),g._setProgress(101)):(f=g._parseError(j,d,g.msgUploadError),g._showFileError(f,e,"filebatchuploaderror"))},d=function(){g.unlock(),g._clearFileInput(),g._raise("filebatchuploadcomplete",[g.fileManager.stack,g._getExtraData()])},e=function(a,b,c){var d=g._getOutData(i,a);f=g._parseError(j,a,c),h.data=d,g._showFileError(f,d,"filebatchuploaderror"),g._setProgress(101,g.$progress,g.msgAjaxProgressError.replace("{operation}",j))},g._ajaxSubmit(a,c,d,e,i))},_deleteFileIndex:function(c){var d=this,e=c.attr("data-fileindex"),f=d.reversePreviewOrder;e.substring(0,5)===b.INIT_FLAG&&(e=parseInt(e.replace(b.INIT_FLAG,"")),d.initialPreview=b.spliceArray(d.initialPreview,e,f),d.initialPreviewConfig=b.spliceArray(d.initialPreviewConfig,e,f),d.initialPreviewThumbTags=b.spliceArray(d.initialPreviewThumbTags,e,f),d.getFrames().each(function(){var c=a(this),d=c.attr("data-fileindex");d.substring(0,5)===b.INIT_FLAG&&(d=parseInt(d.replace(b.INIT_FLAG,"")),d>e&&(d--,c.attr("data-fileindex",b.INIT_FLAG+d)))}),(d.uploadAsync||d.enableResumableUpload)&&(d.cacheInitialPreview=d.getPreview()))},_initFileActions:function(){var c=this;c.showPreview&&(c._initZoomButton(),c.getFrames(" .kv-file-remove").each(function(){var d,e,f,g,h=a(this),i=h.closest(b.FRAMES),j=i.attr("id"),k=i.attr("data-fileindex");c._handler(h,"click",function(){return g=c._raise("filepreremove",[j,k]),g!==!1&&c._validateMinCount()?(d=i.hasClass("file-preview-error"),b.cleanMemory(i),void i.fadeOut("slow",function(){b.cleanZoomCache(c._getZoom(j)),c.fileManager.remove(i),c._clearObjects(i),i.remove(),j&&d&&c.$errorContainer.find('li[data-thumb-id="'+j+'"]').fadeOut("fast",function(){a(this).remove(),c._errorsExist()||c._resetErrors()}),c._clearFileInput();var g,h=c.previewCache.count(!0),l=c.fileManager.count(),m=c.showPreview&&c.getFrames().length;0!==l||0!==h||m?(e=h+l,e>1?f=c._getMsgSelected(e):(g=c.fileManager.getFirstFile(),f=g?g.nameFmt:"_"),c._setCaption(f)):c.reset(),c._raise("fileremoved",[j,k])})):!1})}),c.getFrames(" .kv-file-upload").each(function(){var d=a(this);c._handler(d,"click",function(){var a=d.closest(b.FRAMES),e=a.attr("data-fileid");c.$progress.hide(),(!a.hasClass("file-preview-error")||c.retryErrorUploads)&&c._uploadSingle(c.fileManager.getIndex(e),e,!1)})}))},_initPreviewActions:function(){var c=this,d=c.$preview,e=c.deleteExtraData||{},f=b.FRAMES+" .kv-file-remove",g=c.fileActionSettings,h=g.removeClass,i=g.removeErrorClass,j=function(){var a=c.isAjaxUpload?c.previewCache.count(!0):c._inputFileCount();c.getFrames().length||a||(c._setCaption(""),c.reset(),c.initialCaption="")};c._initZoomButton(),d.find(f).each(function(){var d,f,g,k,l=a(this),m=l.data("url")||c.deleteUrl,n=l.data("key"),o=c.ajaxOperations.deleteThumb;if(!b.isEmpty(m)&&void 0!==n){"function"==typeof m&&(m=m());var p,q,r,s,t,u=l.closest(b.FRAMES),v=c.previewCache.data,w=u.attr("data-fileindex");w=parseInt(w.replace(b.INIT_FLAG,"")),r=b.isEmpty(v.config)&&b.isEmpty(v.config[w])?null:v.config[w],t=b.isEmpty(r)||b.isEmpty(r.extra)?e:r.extra,s=r.filename||r.caption||"","function"==typeof t&&(t=t()),q={id:l.attr("id"),key:n,extra:t},f=function(a){c.ajaxAborted=!1,c._raise("filepredelete",[n,a,t]),c._abort()?a.abort():(l.removeClass(i),b.addCss(u,"file-uploading"),b.addCss(l,"disabled "+h))},g=function(a,e,f){var g,k;return b.isEmpty(a)||b.isEmpty(a.error)?(u.removeClass("file-uploading").addClass("file-deleted"),void u.fadeOut("slow",function(){w=parseInt(u.attr("data-fileindex").replace(b.INIT_FLAG,"")),c.previewCache.unset(w),c._deleteFileIndex(u),g=c.previewCache.count(!0),k=g>0?c._getMsgSelected(g):"",c._setCaption(k),c._raise("filedeleted",[n,f,t]),b.cleanZoomCache(c._getZoom(u.attr("id"))),c._clearObjects(u),u.remove(),j()})):(q.jqXHR=f,q.response=a,d=c._parseError(o,f,c.msgDeleteError,s),c._showFileError(d,q,"filedeleteerror"),u.removeClass("file-uploading"),l.removeClass("disabled "+h).addClass(i),void j())},k=function(a,b,d){var e=c._parseError(o,a,d,s);q.jqXHR=a,q.response={},c._showFileError(e,q,"filedeleteerror"),u.removeClass("file-uploading"),l.removeClass("disabled "+h).addClass(i),j()},c._initAjaxSettings(),c._mergeAjaxCallback("beforeSend",f,"delete"),c._mergeAjaxCallback("success",g,"delete"),c._mergeAjaxCallback("error",k,"delete"),p=a.extend(!0,{},{url:c._encodeURI(m),type:"POST",dataType:"json",data:a.extend(!0,{},{key:n},t)},c._ajaxDeleteSettings),c._handler(l,"click",function(){return c._validateMinCount()?(c.ajaxAborted=!1,c._raise("filebeforedelete",[n,t]),void(c.ajaxAborted instanceof Promise?c.ajaxAborted.then(function(b){b||a.ajax(p)}):c.ajaxAborted||a.ajax(p))):!1})}})},_hideFileIcon:function(){var a=this;a.overwriteInitial&&a.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){var a=this;b.addCss(a.$captionContainer,"icon-visible")},_getSize:function(b,c){var d,e,f=this,g=parseFloat(b),h=f.fileSizeGetter;return a.isNumeric(b)&&a.isNumeric(g)?("function"==typeof h?e=h(g):0===g?e="0.00 B":(d=Math.floor(Math.log(g)/Math.log(1024)),c||(c=["B","KB","MB","GB","TB","PB","EB","ZB","YB"]),e=1*(g/Math.pow(1024,d)).toFixed(2)+" "+c[d]),f._getLayoutTemplate("size").replace("{sizeText}",e)):""},_getFileType:function(a){var b=this;return b.mimeTypeAliases[a]||a},_generatePreviewTemplate:function(c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q,r,s,t=this,u=t.slug(e),v="",w="",x=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,y=u,z=u,A="type-default",B=l||t._renderFileFooter(c,u,j,"auto",i),C=t.preferIconicPreview,D=t.preferIconicZoomPreview,E=C?"other":c;return r=400>x?t.previewSettingsSmall[E]||t.defaults.previewSettingsSmall[E]:t.previewSettings[E]||t.defaults.previewSettings[E],r&&a.each(r,function(a,b){w+=a+":"+b+";"}),s=function(d,i,j,l){var p=j?"zoom-"+g:g,q=t._getPreviewTemplate(d),r=(k||"")+" "+l;return t.frameClass&&(r=t.frameClass+" "+r),j&&(r=r.replace(" "+b.SORT_CSS,"")),q=t._parseFilePreviewIcon(q,e),"text"===d&&(i=b.htmlEncode(i)),"object"!==c||f||a.each(t.defaults.fileTypeSettings,function(a,b){"object"!==a&&"other"!==a&&b(e,f)&&(A="type-"+a)}),b.isEmpty(o)||(void 0!==o.title&&null!==o.title&&(y=o.title),void 0!==o.alt&&null!==o.alt&&(y=o.alt)),q.setTokens({previewId:p,caption:u,title:y,alt:z,frameClass:r,type:t._getFileType(f),fileindex:m,fileid:h||"",typeCss:A,footer:B,data:i,template:n||c,style:w?'style="'+w+'"':""})},m=m||g.slice(g.lastIndexOf("-")+1),t.fileActionSettings.showZoom&&(v=s(D?"other":c,p?p:d,!0,"kv-zoom-thumb")),v="\n"+t._getLayoutTemplate("zoomCache").replace("{zoomContent}",v),"function"==typeof t.sanitizeZoomCache&&(v=t.sanitizeZoomCache(v)),q=s(C?"other":c,d,!1,"kv-preview-thumb"),q+v},_addToPreview:function(a,b){var c=this;return c.reversePreviewOrder?a.prepend(b):a.append(b)},_previewDefault:function(a,c){var d=this,e=d.$preview;if(d.showPreview){var f,g=b.getFileName(a),h=a?a.type:"",i=a.size||0,j=d._getFileName(a,""),k=c===!0&&!d.isAjaxUpload,l=b.createObjectURL(a),m=d.fileManager.getId(a),n=d._getThumbId(m);d._clearDefaultPreview(),f=d._generatePreviewTemplate("other",l,g,h,n,m,k,i),d._addToPreview(e,f),d._setThumbAttr(n,j,i),c===!0&&d.isAjaxUpload&&d._setThumbStatus(d._getFrame(n),"Error")}},_previewFile:function(a,c,d,e,f){if(this.showPreview){var g,h=this,i=b.getFileName(c),j=f.type,k=f.name,l=h._parseFileType(j,i),m=h.$preview,n=c.size||0,o="text"===l||"html"===l||"image"===l?d.target.result:e,p=h.fileManager.getId(c),q=h._getThumbId(p);"html"===l&&h.purifyHtml&&window.DOMPurify&&(o=window.DOMPurify.sanitize(o)),g=h._generatePreviewTemplate(l,o,i,j,q,p,!1,n),h._clearDefaultPreview(),h._addToPreview(m,g);var r=h._getFrame(q);h._validateImageOrientation(r.find("img"),c,q,p,k,j,n,o),h._setThumbAttr(q,k,n),h._initSortable()}},_setThumbAttr:function(a,b,c){var d=this,e=d._getFrame(a);e.length&&(c=c&&c>0?d._getSize(c):"",e.data({caption:b,size:c}))},_setInitThumbAttr:function(){var a,c,d,e,f=this,g=f.previewCache.data,h=f.previewCache.count(!0);if(0!==h)for(var i=0;h>i;i++)a=g.config[i],e=f.previewInitId+"-"+b.INIT_FLAG+i,c=b.ifSet("caption",a,b.ifSet("filename",a)),d=b.ifSet("size",a),f._setThumbAttr(e,c,d)},_slugDefault:function(a){return b.isEmpty(a)?"":String(a).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(a){var c,d,e,f,g,h=this,i=h.$element,j=b.isIE(9)&&b.findFileName(i.val())||i[0].files[0]&&i[0].files[0].name;!j&&h.fileManager.count()>0?(g=h.fileManager.getFirstFile(),c=g.nameFmt):c=j?h.slug(j):"_",d=h.isAjaxUpload?h.fileManager.count():a,f=h.previewCache.count(!0)+d,e=1===d?c:h._getMsgSelected(f),h.isError?(h.$previewContainer.removeClass("file-thumb-loading"),h.$previewStatus.html(""),h.$captionContainer.removeClass("icon-visible")):h._showFileIcon(),h._setCaption(e,h.isError),h.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&h._raise("fileselect",[a,c]),h.previewCache.count(!0)&&h._initPreviewActions()},_setThumbStatus:function(a,b){var c=this;if(c.showPreview){var d="indicator"+b,e=d+"Title",f="file-preview-"+b.toLowerCase(),g=a.find(".file-upload-indicator"),h=c.fileActionSettings;a.removeClass("file-preview-success file-preview-error file-preview-paused file-preview-loading"),"Success"===b&&a.find(".file-drag-handle").remove(),g.html(h[d]),g.attr("title",h[e]),a.addClass(f),"Error"!==b||c.retryErrorUploads||a.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){var a=this;a._setProgress(101,a.$progress,a.msgCancelled)},_setProgress:function(a,c,d,e){var f=this;if(c=c||f.$progress,c.length){var g,h=Math.min(a,100),i=f.progressUploadThreshold,j=100>=a?f.progressTemplate:f.progressCompleteTemplate,k=100>h?f.progressTemplate:d?f.paused?f.progressPauseTemplate:f.progressErrorTemplate:j;a>=100&&(e=""),b.isEmpty(k)||(g=i&&h>i&&100>=a?k.setTokens({percent:i,status:f.msgUploadThreshold}):k.setTokens({percent:h,status:a>100?f.msgUploadEnd:h+"%"}),e=e||"",g=g.setTokens({stats:e}),c.html(g),d&&c.find('[role="progressbar"]').html(d))}},_setFileDropZoneTitle:function(){var a,c=this,d=c.$container.find(".file-drop-zone"),e=c.dropZoneTitle;c.isClickable&&(a=b.isEmpty(c.$element.attr("multiple"))?c.fileSingle:c.filePlural,e+=c.dropZoneClickTitle.replace("{files}",a)),d.find("."+c.dropZoneTitleClass).remove(),!c.showPreview||0===d.length||c.fileManager.count()>0||!c.dropZoneEnabled||!c.isAjaxUpload&&c.$element.files||(0===d.find(b.FRAMES).length&&b.isEmpty(c.defaultPreviewContent)&&d.prepend('<div class="'+c.dropZoneTitleClass+'">'+e+"</div>"),c.$container.removeClass("file-input-new"),b.addCss(c.$container,"file-input-ajax-new"))},_getStats:function(a){var c,d,e=this;return e.showUploadStats&&a&&a.bitrate?(d=e._getLayoutTemplate("stats"),c=a.elapsed&&a.bps?e.msgPendingTime.setTokens({time:b.getElapsed(Math.ceil(a.pendingBytes/a.bps))}):e.msgCalculatingTime,d.setTokens({uploadSpeed:a.bitrate,pendingTime:c})):""},_setResumableProgress:function(a,b,c){var d=this,e=d.resumableManager,f=c?e:d,g=c?c.find(".file-thumb-progress"):null;0===f.lastProgress&&(f.lastProgress=a),a<f.lastProgress&&(a=f.lastProgress),d._setProgress(a,g,null,d._getStats(b)),f.lastProgress=a},_setFileUploadStats:function(c,d,e,f){var g=this,h=g.$progress;if(g.showPreview||h&&h.length){var i,j=g.fileManager,k=j.getThumb(c),l=g.resumableManager,m=0,n=j.getTotalSize(),o=a.extend(!0,{},f);if(g.enableResumableUpload){var p,q=f.loaded,r=l.getUploadedSize(),s=l.file.size;q+=r,p=j.uploadedSize+q,d=b.round(100*q/s),f.pendingBytes=s-r,g._setResumableProgress(d,f,k),i=Math.floor(100*p/n),o.pendingBytes=n-p,g._setResumableProgress(i,o)}else j.setProgress(c,d),h=k&&k.length?k.find(".file-thumb-progress"):null,g._setProgress(d,h,null,g._getStats(f)),a.each(j.stats,function(a,b){m+=b.loaded}),o.pendingBytes=n-m,i=b.round(m/n*100),g._setProgress(i,null,null,g._getStats(o))}},_validateMinCount:function(){var a=this,b=a.isAjaxUpload?a.fileManager.count():a._inputFileCount();return a.validateInitialCount&&a.minFileCount>0&&a._getFileCount(b-1)<a.minFileCount?(a._noFilesError({}),!1):!0},_getFileCount:function(a){var b=this,c=0;return b.validateInitialCount&&!b.overwriteInitial&&(c=b.previewCache.count(!0),a+=c),a},_getFileId:function(a){return b.getFileId(a,this.generateFileId)},_getFileName:function(a,c){var d=this,e=b.getFileName(a);return e?d.slug(e):c},_getFileNames:function(a){var b=this;return b.filenames.filter(function(b){return a?void 0!==b:void 0!==b&&null!==b})},_setPreviewError:function(a,b){var c=this,d=c.removeFromPreviewOnError&&!c.retryErrorUploads;if((!b||d)&&c.fileManager.remove(a),c.showPreview){if(d)return void a.remove();c._setThumbStatus(a,"Error"),c._refreshUploadButton(a)}},_refreshUploadButton:function(a){var b=this,c=a.find(".kv-file-upload"),d=b.fileActionSettings,e=d.uploadIcon,f=d.uploadTitle;c.length&&(b.retryErrorUploads&&(e=d.uploadRetryIcon,f=d.uploadRetryTitle),c.attr("title",f).html(e))},_checkDimensions:function(a,c,d,e,f,g,h){var i,j,k,l,m=this,n="Small"===c?"min":"max",o=m[n+"Image"+g];!b.isEmpty(o)&&d.length&&(k=d[0],j="Width"===g?k.naturalWidth||k.width:k.naturalHeight||k.height,l="Small"===c?j>=o:o>=j,l||(i=m["msgImage"+g+c].setTokens({name:f,size:o}),m._showFileError(i,h),m._setPreviewError(e)))},_getExifObj:function(a){var c=this,d=null,e=b.logMessages.exifWarning;if("data:image/jpeg;base64,"!==a.slice(0,23)&&"data:image/jpg;base64,"!==a.slice(0,22))return void(d=null);try{d=window.piexif?window.piexif.load(a):null}catch(f){d=null,e=f&&f.message||""}return d||c._log(b.logMessages.badExifParser,{details:e}),d},setImageOrientation:function(c,d,e,f){var g,h,i,j=this,k=!c||!c.length,l=!d||!d.length,m=!1,n=k&&f&&"image"===f.attr("data-template");k&&l||(i="load.fileinputimageorient",n?(c=d,d=null,c.css(j.previewSettings.image),h=a(document.createElement("div")).appendTo(f.find(".kv-file-content")),g=a(document.createElement("span")).insertBefore(c),c.css("visibility","hidden").removeClass("file-zoom-detail").appendTo(h)):m=!c.is(":visible"),c.off(i).on(i,function(){m&&(j.$preview.removeClass("hide-content"),f.find(".kv-file-content").css("visibility","hidden"));var a=c.get(0),i=d&&d.length?d.get(0):null,k=a.offsetHeight,l=a.offsetWidth,o=b.getRotation(e);if(m&&(f.find(".kv-file-content").css("visibility","visible"),j.$preview.addClass("hide-content")),c.data("orientation",e),i&&d.data("orientation",e),5>e)return b.setTransform(a,o),void b.setTransform(i,o);var p=Math.atan(l/k),q=Math.sqrt(Math.pow(k,2)+Math.pow(l,2)),r=q?k/Math.cos(Math.PI/2+p)/q:1,s=" scale("+Math.abs(r)+")";b.setTransform(a,o+s),b.setTransform(i,o+s),n&&(c.css("visibility","visible").insertAfter(g).addClass("file-zoom-detail"),g.remove(),h.remove())}))},_validateImageOrientation:function(c,d,e,f,g,h,i,j){var k,l,m=this,n=m.autoOrientImage,o=b.getZoomSelector(e," img");return k=n?m._getExifObj(j):null,(l=k?k["0th"][piexif.ImageIFD.Orientation]:null)?(m.setImageOrientation(c,a(o),l,m._getFrame(e)),m._raise("fileimageoriented",{$img:c,file:d}),void m._validateImage(e,f,g,h,i,j,k)):void m._validateImage(e,f,g,h,i,j,k)},_validateImage:function(b,c,d,e,f,g,h){var i,j,k,l=this,m=l.$preview,n=l._getFrame(b),o=n.attr("data-fileindex"),p=n.find("img");d=d||"Untitled",p.one("load",function(){j=n.width(),k=m.width(),j>k&&p.css("width","100%"),i={ind:o,id:b,fileId:c},l._checkDimensions(o,"Small",p,n,d,"Width",i),l._checkDimensions(o,"Small",p,n,d,"Height",i),l.resizeImage||(l._checkDimensions(o,"Large",p,n,d,"Width",i),l._checkDimensions(o,"Large",p,n,d,"Height",i)),l._raise("fileimageloaded",[b]),l.fileManager.addImage(c,{ind:o,img:p,thumb:n,pid:b,typ:e,siz:f,validated:!1,imgData:g,exifObj:h}),n.data("exif",h),l._validateAllImages()}).one("error",function(){l._raise("fileimageloaderror",[b])}).each(function(){this.complete?a(this).trigger("load"):this.error&&a(this).trigger("error")})},_validateAllImages:function(){var b,c=this,d={val:0},e=c.fileManager.getImageCount(),f=c.resizeIfSizeMoreThan;e===c.fileManager.totalImages&&(c._raise("fileimagesloaded"),c.resizeImage&&a.each(c.fileManager.loadedImages,function(a,g){g.validated||(b=g.siz,b&&b>1e3*f&&c._getResizedImage(a,g,d,e),g.validated=!0)}))},_getResizedImage:function(c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q=this,r=a(d.img)[0],s=r.naturalWidth,t=r.naturalHeight,u=1,v=q.maxImageWidth||s,w=q.maxImageHeight||t,x=!(!s||!t),y=q.imageCanvas,z=q.imageCanvasContext,A=d.typ,B=d.pid,C=d.ind,D=d.thumb,E=d.exifObj;if(k=function(a,b,c){q.isAjaxUpload?q._showFileError(a,b,c):q._showError(a,b,c),q._setPreviewError(D)},n=q.fileManager.getFile(c),o={id:B,index:C,fileId:c},p=[c,B,C],(!n||!x||v>=s&&w>=t)&&(x&&n&&q._raise("fileimageresized",p),e.val++,e.val===f&&q._raise("fileimagesresized"),!x))return void k(q.msgImageResizeError,o,"fileimageresizeerror");A=A||q.resizeDefaultImageType,h=s>v,i=t>w,u="width"===q.resizePreference?h?v/s:i?w/t:1:i?w/t:h?v/s:1,q._resetCanvas(),s*=u,t*=u,y.width=s,y.height=t;try{z.drawImage(r,0,0,s,t),j=y.toDataURL(A,q.resizeQuality),E&&(m=window.piexif.dump(E),j=window.piexif.insert(m,j)),g=b.dataURI2Blob(j),q.fileManager.setFile(c,g),q._raise("fileimageresized",p),e.val++,e.val===f&&q._raise("fileimagesresized",[void 0,void 0]),g instanceof Blob||k(q.msgImageResizeError,o,"fileimageresizeerror")}catch(F){e.val++,e.val===f&&q._raise("fileimagesresized",[void 0,void 0]),l=q.msgImageResizeException.replace("{errors}",F.message),k(l,o,"fileimageresizeexception")}},_initBrowse:function(a){var c=this,d=c.$element;c.showBrowse?c.$btnFile=a.find(".btn-file").append(d):(d.appendTo(a).attr("tabindex",-1),b.addCss(d,"file-no-browse"))},_initClickable:function(){var c,d,e=this;e.isClickable&&(c=e.$dropZone,e.isAjaxUpload||(d=e.$preview.find(".file-default-preview"),d.length&&(c=d)),b.addCss(c,"clickable"),c.attr("tabindex",-1),e._handler(c,"click",function(b){var d=a(b.target);a(e.elErrorContainer+":visible").length||d.parents(".file-preview-thumbnails").length&&!d.parents(".file-default-preview").length||(e.$element.data("zoneClicked",!0).trigger("click"),c.blur())}))},_initCaption:function(){var a=this,c=a.initialCaption||"";return a.overwriteInitial||b.isEmpty(c)?(a.$caption.val(""),!1):(a._setCaption(c),!0)},_setCaption:function(c,d){var e,f,g,h,i,j,k=this;if(k.$caption.length){if(k.$captionContainer.removeClass("icon-visible"),d)e=a("<div>"+k.msgValidationError+"</div>").text(),h=k.fileManager.count(),h?(j=k.fileManager.getFirstFile(),i=1===h&&j?j.nameFmt:k._getMsgSelected(h)):i=k._getMsgSelected(k.msgNo),f=b.isEmpty(c)?i:c,g='<span class="'+k.msgValidationErrorClass+'">'+k.msgValidationErrorIcon+"</span>";else{if(b.isEmpty(c))return;e=a("<div>"+c+"</div>").text(),f=e,g=k._getLayoutTemplate("fileIcon")}k.$captionContainer.addClass("icon-visible"),k.$caption.attr("title",e).val(f),k.$captionIcon.html(g)}},_createContainer:function(){var b=this,c={"class":"file-input file-input-new"+(b.rtl?" kv-rtl":"")},d=a(document.createElement("div")).attr(c).html(b._renderMain());return d.insertBefore(b.$element),b._initBrowse(d),b.theme&&d.addClass("theme-"+b.theme),d},_refreshContainer:function(){var a=this,b=a.$container,c=a.$element;c.insertAfter(b),b.html(a._renderMain()),a._initBrowse(b),a._validateDisabled()},_validateDisabled:function(){var a=this;a.$caption.attr({readonly:a.isDisabled})},_renderMain:function(){var a=this,b=a.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",c=a.showClose?a._getLayoutTemplate("close"):"",d=a.showPreview?a._getLayoutTemplate("preview").setTokens({"class":a.previewClass,dropClass:b}):"",e=a.isDisabled?a.captionClass+" file-caption-disabled":a.captionClass,f=a.captionTemplate.setTokens({"class":e+" kv-fileinput-caption"});return a.mainTemplate.setTokens({"class":a.mainClass+(!a.showBrowse&&a.showCaption?" no-browse":""),preview:d,close:c,caption:f,upload:a._renderButton("upload"),remove:a._renderButton("remove"),cancel:a._renderButton("cancel"),pause:a._renderButton("pause"),browse:a._renderButton("browse")})},_renderButton:function(a){var c=this,d=c._getLayoutTemplate("btnDefault"),e=c[a+"Class"],f=c[a+"Title"],g=c[a+"Icon"],h=c[a+"Label"],i=c.isDisabled?" disabled":"",j="button";switch(a){case"remove":if(!c.showRemove)return"";break;case"cancel":if(!c.showCancel)return"";e+=" kv-hidden";break;case"pause":if(!c.showPause)return"";e+=" kv-hidden";break;case"upload":if(!c.showUpload)return"";c.isAjaxUpload&&!c.isDisabled?d=c._getLayoutTemplate("btnLink").replace("{href}",c.uploadUrl):j="submit";break;case"browse":if(!c.showBrowse)return"";d=c._getLayoutTemplate("btnBrowse");break;default:return""}return e+="browse"===a?" btn-file":" fileinput-"+a+" fileinput-"+a+"-button",b.isEmpty(h)||(h=' <span class="'+c.buttonLabelClass+'">'+h+"</span>"),d.setTokens({type:j,css:e,title:f,status:i,icon:g,label:h})},_renderThumbProgress:function(){var a=this;return'<div class="file-thumb-progress kv-hidden">'+a.progressInfoTemplate.setTokens({percent:101,status:a.msgUploadBegin,stats:""})+"</div>"},_renderFileFooter:function(a,c,d,e,f){var g,h,i=this,j=i.fileActionSettings,k=j.showRemove,l=j.showDrag,m=j.showUpload,n=j.showZoom,o=i._getLayoutTemplate("footer"),p=i._getLayoutTemplate("indicator"),q=f?j.indicatorError:j.indicatorNew,r=f?j.indicatorErrorTitle:j.indicatorNewTitle,s=p.setTokens({indicator:q,indicatorTitle:r});return d=i._getSize(d),h={type:a,caption:c,size:d,width:e,progress:"",indicator:s},i.isAjaxUpload?(h.progress=i._renderThumbProgress(),h.actions=i._renderFileActions(h,m,!1,k,n,l,!1,!1,!1)):h.actions=i._renderFileActions(h,!1,!1,!1,n,l,!1,!1,!1),g=o.setTokens(h),g=b.replaceTags(g,i.previewThumbTags)},_renderFileActions:function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this;if(!a.type&&j&&(a.type="image"),m.enableResumableUpload?b=!1:"function"==typeof b&&(b=b(a)),"function"==typeof c&&(c=c(a)),"function"==typeof d&&(d=d(a)),"function"==typeof e&&(e=e(a)),"function"==typeof f&&(f=f(a)),!(b||c||d||e||f))return"";var n,o=h===!1?"":' data-url="'+h+'"',p="",q="",r=i===!1?"":' data-key="'+i+'"',s="",t="",u="",v=m._getLayoutTemplate("actions"),w=m.fileActionSettings,x=m.otherActionButtons.setTokens({dataKey:r,key:i}),y=g?w.removeClass+" disabled":w.removeClass;return d&&(s=m._getLayoutTemplate("actionDelete").setTokens({removeClass:y,removeIcon:w.removeIcon,removeTitle:w.removeTitle,dataUrl:o,dataKey:r,key:i})),b&&(t=m._getLayoutTemplate("actionUpload").setTokens({uploadClass:w.uploadClass,uploadIcon:w.uploadIcon,uploadTitle:w.uploadTitle})),c&&(u=m._getLayoutTemplate("actionDownload").setTokens({downloadClass:w.downloadClass,downloadIcon:w.downloadIcon,downloadTitle:w.downloadTitle,downloadUrl:k||m.initialPreviewDownloadUrl}),u=u.setTokens({filename:l,key:i})),e&&(p=m._getLayoutTemplate("actionZoom").setTokens({zoomClass:w.zoomClass,zoomIcon:w.zoomIcon,zoomTitle:w.zoomTitle})),f&&j&&(n="drag-handle-init "+w.dragClass,q=m._getLayoutTemplate("actionDrag").setTokens({dragClass:n,dragTitle:w.dragTitle,dragIcon:w.dragIcon})),v.setTokens({"delete":s,upload:t,download:u,zoom:p,drag:q,other:x})},_browse:function(a){var b=this;a&&a.isDefaultPrevented()||!b._raise("filebrowse")||(b.isError&&!b.isAjaxUpload&&b.clear(),b.$captionContainer.focus())},_change:function(c){var d=this;if(!d.changeTriggered){var e,f,g,h=d.$element,i=arguments.length>1,j=d.isAjaxUpload,k=i?arguments[1]:h.get(0).files,l=!j&&b.isEmpty(h.attr("multiple"))?1:d.maxFileCount,m=d.fileManager.count(),n=b.isEmpty(h.attr("multiple")),o=n&&m>0,p=function(b,c,e,f){var g=a.extend(!0,{},d._getOutData(null,{},{},k),{id:e,index:f}),h={id:e,index:f,file:c,files:k};return j?d._showFileError(b,g):d._showError(b,h)},q=function(a,b){var c=d.msgFilesTooMany.replace("{m}",b).replace("{n}",a);d.isError=p(c,null,null,null),d.$captionContainer.removeClass("icon-visible"),d._setCaption("",!0),d.$container.removeClass("file-input-new file-input-ajax-new")};if(d.reader=null,d._resetUpload(),d._hideFileIcon(),d.dropZoneEnabled&&d.$container.find(".file-drop-zone ."+d.dropZoneTitleClass).remove(),j||(k=c.target&&void 0===c.target.files?c.target.value?[{name:c.target.value.replace(/^.+\\/,"")}]:[]:c.target.files||{}),e=k,b.isEmpty(e)||0===e.length)return j||d.clear(),void d._raise("fileselectnone");if(d._resetErrors(),g=e.length,f=d._getFileCount(j?d.fileManager.count()+g:g),l>0&&f>l){if(!d.autoReplace||g>l)return void q(d.autoReplace&&g>l?g:f,l);f>l&&d._resetPreviewThumbs(j)}else!j||o?(d._resetPreviewThumbs(!1),o&&d.clearFileStack()):!j||0!==m||d.previewCache.count(!0)&&!d.overwriteInitial||d._resetPreviewThumbs(!0);d.readFiles(e)}},_abort:function(b){var c,d=this;return d.ajaxAborted&&"object"==typeof d.ajaxAborted&&void 0!==d.ajaxAborted.message?(c=a.extend(!0,{},d._getOutData(null),b),c.abortData=d.ajaxAborted.data||{},c.abortMessage=d.ajaxAborted.message,d._setProgress(101,d.$progress,d.msgCancelled),d._showFileError(d.ajaxAborted.message,c,"filecustomerror"),d.cancel(),!0):!!d.ajaxAborted},_resetFileStack:function(){var b=this,c=0;b._getThumbs().each(function(){var d=a(this),e=d.attr("data-fileindex"),f=d.attr("id");"-1"!==e&&-1!==e&&(b.fileManager.getFile(d.attr("data-fileid"))?d.attr({"data-fileindex":"-1"}):(d.attr({"data-fileindex":c}),c++),b._getZoom(f).attr({"data-fileindex":d.attr("data-fileindex")}))})},_isFileSelectionValid:function(a){var b=this;return a=a||0,b.required&&!b.getFilesCount()?(b.$errorContainer.html(""),b._showFileError(b.msgFileRequired),!1):b.minFileCount>0&&b._getFileCount(a)<b.minFileCount?(b._noFilesError({}),
!1):!0},_canPreview:function(a){var c=this;if(!(a&&c.showPreview&&c.$preview&&c.$preview.length))return!1;var d,e,f,g,h=a.name||"",i=a.type||"",j=(a.size||0)/1e3,k=c._parseFileType(i,h),l=c.allowedPreviewTypes,m=c.allowedPreviewMimeTypes,n=c.allowedPreviewExtensions||[],o=c.disabledPreviewTypes,p=c.disabledPreviewMimeTypes,q=c.disabledPreviewExtensions||[],r=c.maxFilePreviewSize&&parseFloat(c.maxFilePreviewSize)||0,s=new RegExp("\\.("+n.join("|")+")$","i"),t=new RegExp("\\.("+q.join("|")+")$","i");return d=!l||-1!==l.indexOf(k),e=!m||-1!==m.indexOf(i),f=!n.length||b.compare(h,s),g=o&&-1!==o.indexOf(k)||p&&-1!==p.indexOf(i)||q.length&&b.compare(h,t)||r&&!isNaN(r)&&j>r,!g&&(d||e||f)},clearFileStack:function(){var a=this;return a.fileManager.clear(),a._initResumableUpload(),a.enableResumableUpload?(null===a.showPause&&(a.showPause=!0),null===a.showCancel&&(a.showCancel=!1)):(a.showPause=!1,null===a.showCancel&&(a.showCancel=!0)),a.$element},getFileStack:function(){return this.fileManager.stack},getFileList:function(){return this.fileManager.list()},getFilesCount:function(){var a=this,b=a.isAjaxUpload?a.fileManager.count():a._inputFileCount();return a._getFileCount(b)},readFiles:function(c){this.reader=new FileReader;var d,e=this,f=e.$element,g=e.reader,h=e.$previewContainer,i=e.$previewStatus,j=e.msgLoading,k=e.msgProgress,l=e.previewInitId,m=c.length,n=e.fileTypeSettings,o=e.fileManager.count(),p=e.allowedFileTypes,q=p?p.length:0,r=e.allowedFileExtensions,s=b.isEmpty(r)?"":r.join(", "),t=function(b,f,g,h,i,j){var k=a.extend(!0,{},e._getOutData(null,{},{},c),{id:g,index:h,fileId:i}),l=e._getFrame(g),n={id:g,index:h,fileId:i,file:f,files:c};j||e._previewDefault(f,!0),e.isAjaxUpload?setTimeout(function(){d(h+1)},e.processDelay):m=0,j||(e._initFileActions(),l.remove()),e.isError=e.isAjaxUpload?e._showFileError(b,k):e._showError(b,n),e._updateFileDetails(m)};e.fileManager.clearImages(),a.each(c,function(a,b){var c=e.fileTypeSettings.image;c&&c(b.type)&&e.fileManager.totalImages++}),d=function(u){if(b.isEmpty(f.attr("multiple"))&&(m=1),u>=m)return e.isAjaxUpload&&e.fileManager.count()>0?e._raise("filebatchselected",[e.fileManager.stack]):e._raise("filebatchselected",[c]),h.removeClass("file-thumb-loading"),void i.html("");var v,w,x,y,z,A,B,C,D,E,F,G,H,I=o+u,J=l+"-"+I,K=c[u],L=n.text,M=n.image,N=n.html,O=e._getFileName(K,""),P=(K&&K.size||0)/1e3,Q="",R=b.createObjectURL(K),S=0,T="",U=0,V=function(){var a=k.setTokens({index:u+1,files:m,percent:50,name:O});setTimeout(function(){i.html(a),e._updateFileDetails(m),d(u+1)},e.processDelay),e._raise("fileloaded",[K,J,u,g])};if(K){if(C=e.fileManager.getId(K),q>0)for(w=0;q>w;w++)A=p[w],B=e.msgFileTypes[A]||A,T+=0===w?B:", "+B;if(O===!1)return void d(u+1);if(0===O.length)return x=e.msgInvalidFileName.replace("{name}",b.htmlEncode(b.getFileName(K),"[unknown]")),void t(x,K,J,u,C);if(b.isEmpty(r)||(Q=new RegExp("\\.("+r.join("|")+")$","i")),v=P.toFixed(2),e.isAjaxUpload&&e.fileManager.exists(C)||e._getFrame(J).length)return x=e.msgDuplicateFile.setTokens({name:O,size:v}),t(x,K,J,u,C,!0),void(e.isAjaxUpload||(e._clearFileInput(),e.reset()));if(e.maxFileSize>0&&P>e.maxFileSize)return x=e.msgSizeTooLarge.setTokens({name:O,size:v,maxSize:e.maxFileSize}),void t(x,K,J,u,C);if(null!==e.minFileSize&&P<=b.getNum(e.minFileSize))return x=e.msgSizeTooSmall.setTokens({name:O,size:v,minSize:e.minFileSize}),void t(x,K,J,u,C);if(!b.isEmpty(p)&&b.isArray(p)){for(w=0;w<p.length;w+=1)y=p[w],D=n[y],S+=D&&"function"==typeof D&&D(K.type,b.getFileName(K))?1:0;if(0===S)return x=e.msgInvalidFileType.setTokens({name:O,types:T}),void t(x,K,J,u,C)}if(0===S&&!b.isEmpty(r)&&b.isArray(r)&&!b.isEmpty(Q)&&(z=b.compare(O,Q),S+=b.isEmpty(z)?0:z.length,0===S))return x=e.msgInvalidFileExtension.setTokens({name:O,extensions:s}),void t(x,K,J,u,C);if(!e._canPreview(K))return e.isAjaxUpload&&e.fileManager.add(K),e.showPreview&&(h.addClass("file-thumb-loading"),e._previewDefault(K),e._initFileActions()),void setTimeout(function(){e._updateFileDetails(m),d(u+1),e._raise("fileloaded",[K,J,u])},10);E=L(K.type,O),F=N(K.type,O),G=M(K.type,O),i.html(j.replace("{index}",u+1).replace("{files}",m)),h.addClass("file-thumb-loading"),g.onerror=function(a){e._errorHandler(a,O)},g.onload=function(c){var d,f,h,i,j,k,l=[],m=function(a){var b=new FileReader;b.onerror=function(a){e._errorHandler(a,O)},b.onload=function(a){e._previewFile(u,K,a,R,f),e._initFileActions(),V()},a?b.readAsText(K,e.textEncoding):b.readAsDataURL(K)};if(f={name:O,type:K.type},a.each(n,function(a,b){"object"!==a&&"other"!==a&&"function"==typeof b&&b(K.type,O)&&U++}),0===U){for(h=new Uint8Array(c.target.result),w=0;w<h.length;w++)i=h[w].toString(16),l.push(i);if(d=l.join("").toLowerCase().substring(0,8),k=b.getMimeType(d,"",""),b.isEmpty(k)&&(j=b.arrayBuffer2String(g.result),k=b.isSvg(j)?"image/svg+xml":b.getMimeType(d,j,K.type)),f={name:O,type:k},E=L(k,""),F=N(k,""),G=M(k,""),H=E||F,H||G)return void m(H)}e._previewFile(u,K,c,R,f),e._initFileActions(),V()},g.onprogress=function(a){if(a.lengthComputable){var b=a.loaded/a.total*100,c=Math.ceil(b);x=k.setTokens({index:u+1,files:m,percent:c,name:O}),setTimeout(function(){i.html(x)},e.processDelay)}},E||F?g.readAsText(K,e.textEncoding):G?g.readAsDataURL(K):g.readAsArrayBuffer(K),e.fileManager.add(K)}},d(0),e._updateFileDetails(m,!1)},lock:function(){var a=this,b=a.$container;return a._resetErrors(),a.disable(),b.addClass("is-locked"),a.showCancel&&b.find(".fileinput-cancel").show(),a.showPause&&b.find(".fileinput-pause").show(),a._raise("filelock",[a.fileManager.stack,a._getExtraData()]),a.$element},unlock:function(a){var b=this,c=b.$container;return void 0===a&&(a=!0),b.enable(),c.removeClass("is-locked"),b.showCancel&&c.find(".fileinput-cancel").hide(),b.showPause&&c.find(".fileinput-pause").hide(),a&&b._resetFileStack(),b._raise("fileunlock",[b.fileManager.stack,b._getExtraData()]),b.$element},resume:function(){var a=this,b=!1,c=a.$progress,d=a.resumableManager;return a.enableResumableUpload?(a.paused?c.html(a.progressPauseTemplate.setTokens({percent:101,status:a.msgUploadResume,stats:""})):b=!0,a.paused=!1,b&&c.html(a.progressInfoTemplate.setTokens({percent:101,status:a.msgUploadBegin,stats:""})),setTimeout(function(){d.upload()},a.processDelay),a.$element):a.$element},pause:function(){var b,c=this,d=c.resumableManager,e=c.ajaxRequests,f=e.length,g=d.getProgress(),h=c.fileActionSettings;if(!c.enableResumableUpload)return c.$element;if(d.chunkIntervalId&&clearInterval(d.chunkIntervalId),c.ajaxQueueIntervalId&&clearInterval(c.ajaxQueueIntervalId),c._raise("fileuploadpaused",[c.fileManager,d]),f>0)for(b=0;f>b;b+=1)c.paused=!0,e[b].abort();return c.showPreview&&c._getThumbs().each(function(){var b,d=a(this),e=d.attr("data-fileid"),f=c._getLayoutTemplate("stats"),i=d.find(".file-upload-indicator");d.removeClass("file-uploading"),i.attr("title")===h.indicatorLoadingTitle&&(c._setThumbStatus(d,"Paused"),b=f.setTokens({pendingTime:c.msgPaused,uploadSpeed:""}),c.paused=!0,c._setProgress(g,d.find(".file-thumb-progress"),g+"%",b)),c.fileManager.getFile(e)||d.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")}),c._setProgress(101,c.$progress,c.msgPaused),c.$element},cancel:function(){var b,c=this,d=c.ajaxRequests,e=c.resumableManager,f=d.length;if(c.enableResumableUpload&&e.chunkIntervalId?(clearInterval(e.chunkIntervalId),e.reset(),c._raise("fileuploadcancelled",[c.fileManager,e])):c._raise("fileuploadcancelled",[c.fileManager]),c.ajaxQueueIntervalId&&clearInterval(c.ajaxQueueIntervalId),c._initAjax(),f>0)for(b=0;f>b;b+=1)c.cancelling=!0,d[b].abort();return c._getThumbs().each(function(){var b=a(this),d=b.attr("data-fileid"),e=b.find(".file-thumb-progress");b.removeClass("file-uploading"),c._setProgress(0,e),e.hide(),c.fileManager.getFile(d)||(b.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),b.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),c.unlock()}),setTimeout(function(){c._setProgressCancelled()},c.processDelay),c.$element},clear:function(){var c,d=this;if(d._raise("fileclear"))return d.$btnUpload.removeAttr("disabled"),d._getThumbs().find("video,audio,img").each(function(){b.cleanMemory(a(this))}),d._clearFileInput(),d._resetUpload(),d.clearFileStack(),d._resetErrors(!0),d._hasInitialPreview()?(d._showFileIcon(),d._resetPreview(),d._initPreviewActions(),d.$container.removeClass("file-input-new")):(d._getThumbs().each(function(){d._clearObjects(a(this))}),d.isAjaxUpload&&(d.previewCache.data={}),d.$preview.html(""),c=!d.overwriteInitial&&d.initialCaption.length>0?d.initialCaption:"",d.$caption.attr("title","").val(c),b.addCss(d.$container,"file-input-new"),d._validateDefaultPreview()),0===d.$container.find(b.FRAMES).length&&(d._initCaption()||d.$captionContainer.removeClass("icon-visible")),d._hideFileIcon(),d.$captionContainer.focus(),d._setFileDropZoneTitle(),d._raise("filecleared"),d.$element},reset:function(){var a=this;if(a._raise("filereset"))return a.lastProgress=0,a._resetPreview(),a.$container.find(".fileinput-filename").text(""),b.addCss(a.$container,"file-input-new"),(a.getFrames().length||a.dropZoneEnabled)&&a.$container.removeClass("file-input-new"),a.clearFileStack(),a._setFileDropZoneTitle(),a.$element},disable:function(){var a=this;return a.isDisabled=!0,a._raise("filedisabled"),a.$element.attr("disabled","disabled"),a.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),a.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),b.addCss(a.$container.find(".btn-file"),"disabled"),a._initDragDrop(),a.$element},enable:function(){var a=this;return a.isDisabled=!1,a._raise("fileenabled"),a.$element.removeAttr("disabled"),a.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),a.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),a.$container.find(".btn-file").removeClass("disabled"),a._initDragDrop(),a.$element},upload:function(){var c,d,e,f=this,g=f.fileManager,h=g.count(),i=!a.isEmptyObject(f._getExtraData());if(f.isAjaxUpload&&!f.isDisabled&&f._isFileSelectionValid(h)){if(f.lastProgress=0,f._resetUpload(),0===h&&!i)return void f._showFileError(f.msgUploadEmpty);if(f.cancelling=!1,f.$progress.show(),f.lock(),e=g.count(),0===h&&i)return f._setProgress(2),void f._uploadExtraOnly();if(f.enableResumableUpload)return f.resume();if(f.uploadAsync||f.enableResumableUpload){for(d=f._getOutData(null),f._raise("filebatchpreupload",[d]),f.fileBatchCompleted=!1,f.uploadCache={content:[],config:[],tags:[],append:!0},c=0;e>c;c++)f.uploadCache.content[c]=null,f.uploadCache.config[c]=null,f.uploadCache.tags[c]=null;f.$preview.find(".file-preview-initial").removeClass(b.SORT_CSS),f._initSortable(),f.cacheInitialPreview=f.getPreview()}return f._setProgress(2),f.hasInitData=!1,f.uploadAsync?(c=0,void a.each(g.stack,function(a){f._uploadSingle(c,a,!0),c++})):(f._uploadBatch(),f.$element)}},destroy:function(){var b=this,c=b.$form,d=b.$container,e=b.$element,f=b.namespace;return a(document).off(f),a(window).off(f),c&&c.length&&c.off(f),b.isAjaxUpload&&b._clearFileInput(),b._cleanup(),b._initPreviewCache(),e.insertBefore(d).off(f).removeData(),d.off().remove(),e},refresh:function(c){var d=this,e=d.$element;return c="object"!=typeof c||b.isEmpty(c)?d.options:a.extend(!0,{},d.options,c),d._init(c,!0),d._listen(),e},zoom:function(a){var c=this,d=c._getFrame(a),e=c.$modal;d&&(b.initModal(e),e.html(c._getModalContent()),c._setZoomContent(d),e.modal("show"),c._initZoomButtons())},getExif:function(a){var b=this,c=b._getFrame(a);return c&&c.data("exif")||null},getFrames:function(c){var d,e=this;return c=c||"",d=e.$preview.find(b.FRAMES+c),e.reversePreviewOrder&&(d=a(d.get().reverse())),d},getPreview:function(){var a=this;return{content:a.initialPreview,config:a.initialPreviewConfig,tags:a.initialPreviewThumbTags}}},a.fn.fileinput=function(d){if(b.hasFileAPISupport()||b.isIE(9)){var e=Array.apply(null,arguments),f=[];switch(e.shift(),this.each(function(){var g,h=a(this),i=h.data("fileinput"),j="object"==typeof d&&d,k=j.theme||h.data("theme"),l={},m={},n=j.language||h.data("language")||a.fn.fileinput.defaults.language||"en";i||(k&&(m=a.fn.fileinputThemes[k]||{}),"en"===n||b.isEmpty(a.fn.fileinputLocales[n])||(l=a.fn.fileinputLocales[n]||{}),g=a.extend(!0,{},a.fn.fileinput.defaults,m,a.fn.fileinputLocales.en,l,j,h.data()),i=new c(this,g),h.data("fileinput",i)),"string"==typeof d&&f.push(i[d].apply(i,e))}),f.length){case 0:return this;case 1:return f[0];default:return f}}},a.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showUploadStats:!0,showCancel:null,showPause:null,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:function(){var a=window.navigator.userAgent,b=!!a.match(/WebKit/i),c=!!a.match(/iP(od|ad|hone)/i),d=c&&b&&!a.match(/CriOS/i);return!d},autoOrientImageInitial:!0,required:!1,rtl:!1,hideThumbnailContent:!1,encodeUrl:!0,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,sanitizeZoomCache:function(b){var c=a(document.createElement("div")).append(b);return c.find("input,select,.file-thumbnail-footer").remove(),c.html()},previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-sm btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-sm btn-kv btn-default btn-outline-secondary",borderless:"btn btn-sm btn-kv btn-default btn-outline-secondary",close:"btn btn-sm btn-kv btn-default btn-outline-secondary"},previewTemplates:{},previewContentTemplates:{},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedFileTypes:null,allowedFileExtensions:null,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedPreviewExtensions:null,disabledPreviewTypes:void 0,disabledPreviewExtensions:["msi","exe","com","zip","rar","app","vb","scr"],disabledPreviewMimeTypes:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default btn-secondary",pauseIcon:'<i class="glyphicon glyphicon-pause"></i>',pauseClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadParamNames:{chunkCount:"chunkCount",chunkIndex:"chunkIndex",chunkSize:"chunkSize",chunkSizeStart:"chunkSizeStart",chunksUploaded:"chunksUploaded",fileBlob:"fileBlob",fileId:"fileId",fileName:"fileName",fileRelativePath:"fileRelativePath",fileSize:"fileSize",retryCount:"retryCount"},maxAjaxThreads:5,processDelay:100,queueDelay:10,progressDelay:0,enableResumableUpload:!1,resumableUploadOptions:{fallback:null,testUrl:null,chunkSize:2048,maxThreads:4,maxRetries:3,showErrorLog:!0},uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressInfoClass:"progress-bar bg-info progress-bar-info progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressPauseClass:"progress-bar bg-primary progress-bar-primary progress-bar-striped active",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:b.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0,reversePreviewOrder:!1,usePdfRenderer:function(){var a=!!window.MSInputMethodContext&&!!document.documentMode;return!!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)||a},pdfRendererUrl:"",pdfRendererTemplate:'<iframe class="kv-preview-data file-preview-pdf" src="{renderer}?file={data}" {style}></iframe>'},a.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear all unprocessed files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",pauseLabel:"Pause",pauseTitle:"Pause ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPaused:"Paused",msgPlaceholder:"Select {files}...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadResume:"Resuming upload...",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Upload Error",msgDeleteError:"Delete Error",msgProgressError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",msgDuplicateFile:'File "{name}" of same size "{size} KB" has already been selected earlier. Skipping duplicate selection.',msgResumableUploadRetriesExceeded:"Upload aborted beyond <b>{max}</b> retries for file <b>{file}</b>! Error Details: <pre>{error}</pre>",msgPendingTime:"{time} remaining",msgCalculatingTime:"calculating time remaining",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},a.fn.fileinput.Constructor=c,a(document).ready(function(){var b=a("input.file[type=file]");b.length&&b.fileinput()})});